<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#6200ee"><meta name="author" content="Explorer"><meta name="copyright" content="Explorer"><meta name="generator" content="Hexo 6.0.0"><meta name="theme" content="hexo-theme-yun"><title>Dockerè¿›é˜¶ | explorerã®åšå®¢</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.2.4/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/@unocss/runtime/mini.global.js"></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link class="aplayer-style-marker" rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script class="aplayer-script-marker" src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" defer></script><script class="meting-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js" defer></script><link rel="icon" type="image/png" href="/./favicon.ico"><link rel="mask-icon" href="/./favicon.ico" color="#6200ee"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"ccsu.top","root":"/","title":["Wu","Shuai","ã®","Blog"],"version":"1.8.8","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}.","hits":"${hits} results found","hits_time":"${hits} results found in ${time} ms"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"local_search":{"path":"/search.xml"},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]},"waline":{"config":{"enable":true,"serverURL":"https://blog-api-seven-vert.vercel.app/","comment":false,"visitor":false,"emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis@latest/bilibili/","https://cdn.jsdelivr.net/gh/walinejs/emojis@latest/weibo/","https://cdn.jsdelivr.net/gh/walinejs/emojis@latest/qq/"],"locale":{"placeholder":"2506812280@qq.com"},"requiredMeta":["nick"],"el":"#waline","lang":"en","path":"/posts/b3ee7ac2/"},"cdn":"https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js","dark":"html.dark"},"vendors":{"darken":"https://cdn.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><link rel="alternate" href="/atom.xml" title="explorerã®åšå®¢" type="application/atom+xml"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-BMBD00SVV4"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-BMBD00SVV4');
}</script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-M9KWR9L');</script><!-- End Google Tag Manager --><meta name="description" content="å®¹å™¨æ•°æ®å·ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·dockerçš„ç†å¿µå›é¡¾ å°†åº”ç”¨å’Œç¯å¢ƒæ‰“åŒ…æˆä¸€ä¸ªé•œåƒï¼ æ•°æ®ï¼Ÿå¦‚æœæ•°æ®éƒ½åœ¨å®¹å™¨ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å®¹å™¨åˆ é™¤ï¼Œæ•°æ®å°±ä¼šä¸¢å¤±ï¼éœ€æ±‚ï¼šæ•°æ®å¯ä»¥æŒä¹…åŒ– MySQLï¼Œå®¹å™¨åˆ é™¤äº†ï¼Œåˆ åº“è·‘è·¯ï¼éœ€æ±‚ï¼šMySQLæ•°æ®å¯ä»¥å­˜å‚¨åœ¨æœ¬åœ°ï¼ å®¹å™¨ä¹‹é—´å¯ä»¥æœ‰ä¸€ä¸ªæ•°æ®å…±äº«çš„æŠ€æœ¯ï¼Dockerå®¹å™¨ä¸­äº§ç”Ÿçš„æ•°æ®ï¼ŒåŒæ­¥åˆ°æœ¬åœ°ï¼ è¿™å°±æ˜¯å·æŠ€æœ¯ï¼ç›®å½•çš„æŒ‚è½½ï¼Œå°†æˆ‘ä»¬å®¹å™¨å†…çš„ç›®å½•ï¼ŒæŒ‚è½½åˆ°Linuxä¸Šé¢ï¼  æ€»ç»“ä¸€å¥è¯ï¼š">
<meta property="og:type" content="article">
<meta property="og:title" content="Dockerè¿›é˜¶">
<meta property="og:url" content="http://ccsu.top/posts/b3ee7ac2/index.html">
<meta property="og:site_name" content="explorerã®åšå®¢">
<meta property="og:description" content="å®¹å™¨æ•°æ®å·ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·dockerçš„ç†å¿µå›é¡¾ å°†åº”ç”¨å’Œç¯å¢ƒæ‰“åŒ…æˆä¸€ä¸ªé•œåƒï¼ æ•°æ®ï¼Ÿå¦‚æœæ•°æ®éƒ½åœ¨å®¹å™¨ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å®¹å™¨åˆ é™¤ï¼Œæ•°æ®å°±ä¼šä¸¢å¤±ï¼éœ€æ±‚ï¼šæ•°æ®å¯ä»¥æŒä¹…åŒ– MySQLï¼Œå®¹å™¨åˆ é™¤äº†ï¼Œåˆ åº“è·‘è·¯ï¼éœ€æ±‚ï¼šMySQLæ•°æ®å¯ä»¥å­˜å‚¨åœ¨æœ¬åœ°ï¼ å®¹å™¨ä¹‹é—´å¯ä»¥æœ‰ä¸€ä¸ªæ•°æ®å…±äº«çš„æŠ€æœ¯ï¼Dockerå®¹å™¨ä¸­äº§ç”Ÿçš„æ•°æ®ï¼ŒåŒæ­¥åˆ°æœ¬åœ°ï¼ è¿™å°±æ˜¯å·æŠ€æœ¯ï¼ç›®å½•çš„æŒ‚è½½ï¼Œå°†æˆ‘ä»¬å®¹å™¨å†…çš„ç›®å½•ï¼ŒæŒ‚è½½åˆ°Linuxä¸Šé¢ï¼  æ€»ç»“ä¸€å¥è¯ï¼š">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181015.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181016.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181017.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181018.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181019.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181020.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181021.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181022.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181023.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181024.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181025.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181026.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181027.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181028.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181029.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181030.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181031.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181032.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181033.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181034.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181035.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181036.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181037.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181038.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181039.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181040.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181041.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181042.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181043.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181044.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181045.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181046.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181047.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181048.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181049.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181050.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181051.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181052.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181053.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181054.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181055.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181056.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181057.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181058.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181059.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181100.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181101.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181102.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181103.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181104.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181105.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181106.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181107.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181108.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181109.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181110.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181111.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181112.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181113.png">
<meta property="article:published_time" content="2022-03-07T01:18:00.000Z">
<meta property="article:modified_time" content="2022-03-07T01:18:00.000Z">
<meta property="article:author" content="Explorer">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181015.png"><script>(function() {
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="Table of Contents"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="Overview"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="Explorer"><img width="96" loading="lazy" src="/images/avatar.jpg" alt="Explorer"><span class="site-author-status" title="åŠªåŠ›å­¦ä¹ ">ğŸ˜„</span></a><div class="site-author-name"><a href="/about/">Explorer</a></div><span class="site-name">explorerã®åšå®¢</span><sub class="site-subtitle"></sub><div class="site-desciption">å‰è·¯æ¼«æ¼«ï¼Œå½“å…‹å·±ï¼Œå½“æ…ç‹¬!</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="Home"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="Archives"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">74</span></a></div><div class="site-state-item"><a href="/categories/" title="Categories"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">18</span></a></div><div class="site-state-item"><a href="/tags/" title="Tags"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">64</span></a></div><a class="site-state-item hty-icon-button" href="/about/" title="ç•™è¨€æ¿"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-clipboard-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/wushuai2000" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=549838440" title="ç½‘æ˜“äº‘éŸ³ä¹" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.zhihu.com/people/huan-ji-91-3/" title="çŸ¥ä¹" target="_blank" style="color:#0084FF"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/345844264" title="å“”å“©å“”å“©" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:2506812280@qq.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="æˆ‘çš„å°ä¼™ä¼´ä»¬" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a><a class="links-item hty-icon-button" href="/albums/" title="ç›¸å†Œ" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-gallery-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-number">1.</span> <span class="toc-text">å®¹å™¨æ•°æ®å·</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-number">1.1.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-number">1.2.</span> <span class="toc-text">ä½¿ç”¨æ•°æ®å·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E6%88%98%EF%BC%9A%E5%AE%89%E8%A3%85MySQL"><span class="toc-number">1.3.</span> <span class="toc-text">å®æˆ˜ï¼šå®‰è£…MySQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B7%E5%90%8D%E5%92%8C%E5%8C%BF%E5%90%8D%E6%8C%82%E8%BD%BD"><span class="toc-number">1.4.</span> <span class="toc-text">å…·åå’ŒåŒ¿åæŒ‚è½½</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9D%E5%A7%8BDockerfile"><span class="toc-number">1.5.</span> <span class="toc-text">åˆå§‹Dockerfile</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%8D%B7%E5%AE%B9%E5%99%A8"><span class="toc-number">1.6.</span> <span class="toc-text">æ•°æ®å·å®¹å™¨</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DockerFile"><span class="toc-number">2.</span> <span class="toc-text">DockerFile</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#DockerFile%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.1.</span> <span class="toc-text">DockerFileä»‹ç»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DockerFile%E6%9E%84%E5%BB%BA%E8%BF%87%E7%A8%8B"><span class="toc-number">2.2.</span> <span class="toc-text">DockerFileæ„å»ºè¿‡ç¨‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DockerFile%E7%9A%84%E6%8C%87%E4%BB%A4"><span class="toc-number">2.3.</span> <span class="toc-text">DockerFileçš„æŒ‡ä»¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E6%88%98%E6%B5%8B%E8%AF%95"><span class="toc-number">2.4.</span> <span class="toc-text">å®æˆ˜æµ‹è¯•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E6%88%98%EF%BC%9ATomcat%E9%95%9C%E5%83%8F"><span class="toc-number">2.5.</span> <span class="toc-text">å®æˆ˜ï¼šTomcaté•œåƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%91%E5%B8%83%E8%87%AA%E5%B7%B1%E7%9A%84%E9%95%9C%E5%83%8F"><span class="toc-number">2.6.</span> <span class="toc-text">å‘å¸ƒè‡ªå·±çš„é•œåƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">2.7.</span> <span class="toc-text">å°ç»“</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker%E7%BD%91%E7%BB%9C"><span class="toc-number">3.</span> <span class="toc-text">Dockerç½‘ç»œ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%90%86%E8%A7%A3Docker0"><span class="toc-number">3.1.</span> <span class="toc-text">ç†è§£Docker0</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%80%93link"><span class="toc-number">3.2.</span> <span class="toc-text">â€“link</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BD%91%E7%BB%9C"><span class="toc-number">3.3.</span> <span class="toc-text">è‡ªå®šä¹‰ç½‘ç»œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%BF%9E%E9%80%9A"><span class="toc-number">3.4.</span> <span class="toc-text">ç½‘ç»œè¿é€š</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E6%88%98%EF%BC%9A%E9%83%A8%E7%BD%B2Redis%E9%9B%86%E7%BE%A4"><span class="toc-number">3.5.</span> <span class="toc-text">å®æˆ˜ï¼šéƒ¨ç½²Redisé›†ç¾¤</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Springboot%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%89%93%E5%8C%85Docker%E9%95%9C%E5%83%8F"><span class="toc-number">4.</span> <span class="toc-text">Springbootå¾®æœåŠ¡æ‰“åŒ…Dockeré•œåƒ</span></a></li></ol></div></div></div><div class="tag-cloud"><div class="tag-cloud-tags"><a href="/tags/57%E6%AD%A5%E8%BF%9B%E7%94%B5%E6%9C%BA/" style="font-size: 12px; color: #999">57æ­¥è¿›ç”µæœº</a> <a href="/tags/AT9SPro/" style="font-size: 12px; color: #999">AT9SPro</a> <a href="/tags/Anaconda/" style="font-size: 12px; color: #999">Anaconda</a> <a href="/tags/Arduino/" style="font-size: 24px; color: #3383cd">Arduino</a> <a href="/tags/CUDA/" style="font-size: 18px; color: #668eb3">CUDA</a> <a href="/tags/CUDNN/" style="font-size: 12px; color: #999">CUDNN</a> <a href="/tags/Conda/" style="font-size: 12px; color: #999">Conda</a> <a href="/tags/DHT11/" style="font-size: 12px; color: #999">DHT11</a> <a href="/tags/Docker/" style="font-size: 18px; color: #668eb3">Docker</a> <a href="/tags/ESP8266/" style="font-size: 12px; color: #999">ESP8266</a> <a href="/tags/GPIO/" style="font-size: 30px; color: #0078e7">GPIO</a> <a href="/tags/GPS/" style="font-size: 12px; color: #999">GPS</a> <a href="/tags/GPU/" style="font-size: 24px; color: #3383cd">GPU</a> <a href="/tags/HC-05/" style="font-size: 12px; color: #999">HC-05</a> <a href="/tags/HTML/" style="font-size: 18px; color: #668eb3">HTML</a> <a href="/tags/Hexo/" style="font-size: 18px; color: #668eb3">Hexo</a> <a href="/tags/Hexo%E5%AE%89%E8%A3%85/" style="font-size: 24px; color: #3383cd">Hexoå®‰è£…</a> <a href="/tags/IAR%E8%BD%AF%E4%BB%B6/" style="font-size: 12px; color: #999">IARè½¯ä»¶</a> <a href="/tags/JavaScript/" style="font-size: 18px; color: #668eb3">JavaScript</a> <a href="/tags/Json/" style="font-size: 12px; color: #999">Json</a></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#6200ee;"><link itemprop="mainEntityOfPage" href="http://ccsu.top/posts/b3ee7ac2/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="Explorer"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="explorerã®åšå®¢"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Dockerè¿›é˜¶</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <span class="post-meta-icon-text">Posted on</span> <time title="Created: 2022-03-07 09:18:00" itemprop="dateCreated datePublished" datetime="2022-03-07T09:18:00+08:00">2022-03-07</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="Word count in article"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-file-word-line"></use></svg></span> <span title="Word count in article">6.6k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="Reading time"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-timer-line"></use></svg></span> <span title="Reading time">31m</span></span></span><span class="post-busuanzi"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="Views"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg> <span id="busuanzi_value_page_pv"></span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/Docker/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">Docker</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/Docker/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">Docker</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><iframe src="//player.bilibili.com/player.html?aid=243999746&bvid=BV1kv411q7Qc&cid=216242319&page=1" style="width: 100%; height: 500px; max-width: 100%ï¼›align:center; padding:20px 0;" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

<h1 id="å®¹å™¨æ•°æ®å·"><a href="#å®¹å™¨æ•°æ®å·" class="headerlink" title="å®¹å™¨æ•°æ®å·"></a>å®¹å™¨æ•°æ®å·</h1><h2 id="ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·"><a href="#ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·" class="headerlink" title="ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·"></a>ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·</h2><p><strong>dockerçš„ç†å¿µå›é¡¾</strong></p>
<p>å°†åº”ç”¨å’Œç¯å¢ƒæ‰“åŒ…æˆä¸€ä¸ªé•œåƒï¼</p>
<p>æ•°æ®ï¼Ÿå¦‚æœæ•°æ®éƒ½åœ¨å®¹å™¨ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å®¹å™¨åˆ é™¤ï¼Œæ•°æ®å°±ä¼šä¸¢å¤±ï¼éœ€æ±‚ï¼šæ•°æ®å¯ä»¥æŒä¹…åŒ–</p>
<p>MySQLï¼Œå®¹å™¨åˆ é™¤äº†ï¼Œåˆ åº“è·‘è·¯ï¼éœ€æ±‚ï¼šMySQLæ•°æ®å¯ä»¥å­˜å‚¨åœ¨æœ¬åœ°ï¼</p>
<p>å®¹å™¨ä¹‹é—´å¯ä»¥æœ‰ä¸€ä¸ªæ•°æ®å…±äº«çš„æŠ€æœ¯ï¼Dockerå®¹å™¨ä¸­äº§ç”Ÿçš„æ•°æ®ï¼ŒåŒæ­¥åˆ°æœ¬åœ°ï¼</p>
<p>è¿™å°±æ˜¯å·æŠ€æœ¯ï¼ç›®å½•çš„æŒ‚è½½ï¼Œå°†æˆ‘ä»¬å®¹å™¨å†…çš„ç›®å½•ï¼ŒæŒ‚è½½åˆ°Linuxä¸Šé¢ï¼</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181015.png" alt="image-20200611220811766" loading="lazy"></p>
<p><strong>æ€»ç»“ä¸€å¥è¯ï¼šå®¹å™¨çš„æŒä¹…åŒ–å’ŒåŒæ­¥æ“ä½œï¼å®¹å™¨é—´ä¹Ÿæ˜¯å¯ä»¥æ•°æ®å…±äº«çš„ï¼</strong></p>
<h2 id="ä½¿ç”¨æ•°æ®å·"><a href="#ä½¿ç”¨æ•°æ®å·" class="headerlink" title="ä½¿ç”¨æ•°æ®å·"></a>ä½¿ç”¨æ•°æ®å·</h2><blockquote>
<p>æ–¹å¼ä¸€ï¼šç›´æ¥ä½¿ç”¨å‘½ä»¤æ¥æŒ‚è½½</p>
</blockquote>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">docker</span> run -it -v ä¸»æœºç›®å½•:å®¹å™¨ç›®å½•

<span class="token comment"># æµ‹è¯•</span>
<span class="token punctuation">[</span>root@localhost home<span class="token punctuation">]</span><span class="token comment"># docker run -it -v /home/ceshi:/home  centos  /bin/bash</span>

<span class="token comment"># å¯åŠ¨èµ·æ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡docker inspect å®¹å™¨id æ¥æŸ¥çœ‹æŒ‚è½½æƒ…å†µï¼šï¼ˆè§ä¸‹å›¾ï¼‰</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181016.png" alt="image-20200611224010091" loading="lazy"></p>
<p>æµ‹è¯•æ–‡ä»¶çš„åŒæ­¥</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181017.png" alt="image-20200611224046109" loading="lazy"></p>
<p>åœ¨å®¹å™¨å†…æŒ‡å®šç›®å½•ä¸‹æ·»åŠ æˆ–ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ï¼Œä¼šåŒæ­¥åˆ°ä¸»æœºæŒ‡å®šç›®å½•ä¸‹ï¼åä¹‹ï¼Œåœ¨ä¸»æœºç›®å½•ä¸‹åšç›¸å…³æ“ä½œï¼Œä¹Ÿä¼šåŒæ­¥åˆ°å®¹å™¨å¯¹åº”çš„ç›®å½•ä¸‹ï¼</p>
<p>å†æ¥æµ‹è¯•ï¼</p>
<p>1ã€åœæ­¢å®¹å™¨</p>
<p>2ã€å®¿ä¸»æœºä¿®æ”¹æ–‡ä»¶</p>
<p>3ã€å¯åŠ¨å®¹å™¨</p>
<p>4ã€å®¹å™¨å†…çš„æ•°æ®ä¾æ—§æ˜¯åŒæ­¥çš„ï¼</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181018.png" alt="image-20200611224137284" loading="lazy"></p>
<p>å¥½å¤„ï¼šæˆ‘ä»¬ä»¥åä¿®æ”¹åªéœ€è¦åœ¨æœ¬åœ°ä¿®æ”¹å³å¯ï¼Œå®¹å™¨å†…ä¼šè‡ªåŠ¨åŒæ­¥ï¼</p>
<h2 id="å®æˆ˜ï¼šå®‰è£…MySQL"><a href="#å®æˆ˜ï¼šå®‰è£…MySQL" class="headerlink" title="å®æˆ˜ï¼šå®‰è£…MySQL"></a>å®æˆ˜ï¼šå®‰è£…MySQL</h2><p>æ€è€ƒï¼šMySQLçš„æ•°æ®æŒä¹…åŒ–çš„é—®é¢˜ï¼</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># è·å–é•œåƒ</span>
<span class="token punctuation">[</span>root@localhost home<span class="token punctuation">]</span><span class="token comment"># docker pull mysql:5.7</span>

<span class="token comment"># è¿è¡Œå®¹å™¨ï¼Œéœ€è¦åšæ•°æ®æŒ‚è½½ï¼ # å®‰è£…mysql,éœ€è¦é…ç½®å¯†ç ï¼Œè¿™æ˜¯è¦æ³¨æ„çš„ç‚¹ï¼</span>
<span class="token comment"># å®˜æ–¹æµ‹è¯•ï¼šdocker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</span>

<span class="token comment"># å¯åŠ¨æˆ‘ä»¬çš„MySQLå®¹å™¨</span>
-d	åå°è¿è¡Œ
-p	ç«¯å£æ˜ å°„
-v	å·æŒ‚è½½
-e  ç¯å¢ƒé…ç½®
--name  å®¹å™¨åå­—
<span class="token punctuation">[</span>root@localhost home<span class="token punctuation">]</span><span class="token comment"># docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name mysql01 mysql:5.7</span>

<span class="token comment"># å¯åŠ¨æˆåŠŸä¹‹åï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°ä½¿ç”¨sqlyog è¿æ¥æµ‹è¯•ä¸€ä¸‹</span>
<span class="token comment"># sqlyog â€”â€” è¿æ¥åˆ°æœåŠ¡å™¨çš„3310 â€”â€” 3310å’Œå®¹å™¨å†…çš„3306æ˜ å°„ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è¿æ¥ä¸Šäº†ï¼</span>

<span class="token comment"># æœ¬åœ°æµ‹è¯•åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼ŒæŸ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„æ˜ å°„çš„è·¯å¾„æ˜¯å¦ok!</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å‡è®¾æˆ‘ä»¬å°†å®¹å™¨åˆ é™¤</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181019.png" alt="image-20200611230752177" loading="lazy"></p>
<p>å‘ç°ï¼Œæˆ‘ä»¬æŒ‚è½½åˆ°æœ¬åœ°çš„æ•°æ®å·ä¾æ—§æ²¡æœ‰ä¸¢å¤±ï¼Œè¿™å°±å®ç°äº†å®¹å™¨æ•°æ®æŒä¹…åŒ–åŠŸèƒ½ï¼</p>
<h2 id="å…·åå’ŒåŒ¿åæŒ‚è½½"><a href="#å…·åå’ŒåŒ¿åæŒ‚è½½" class="headerlink" title="å…·åå’ŒåŒ¿åæŒ‚è½½"></a>å…·åå’ŒåŒ¿åæŒ‚è½½</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># åŒ¿åæŒ‚è½½</span>
-v å®¹å™¨å†…è·¯å¾„
<span class="token function">docker</span> run -d -P --name nginx01 -v /etc/nginx nginx


<span class="token comment"># æŸ¥çœ‹æ‰€æœ‰å·çš„æƒ…å†µ</span>
<span class="token punctuation">[</span>root@localhost data<span class="token punctuation">]</span><span class="token comment"># docker volume ls</span>
DRIVER              VOLUME NAME
<span class="token builtin class-name">local</span>               2dd0379216c9ee4441ed56f8ce53461c19abe78b8cfd024ac5fbe07c3b8f09ba

<span class="token comment"># è¿™é‡Œå‘ç°ï¼Œè¿™ç§å°±æ˜¯åŒ¿åæŒ‚è½½ï¼Œæˆ‘ä»¬åœ¨ -v ååªå†™äº†å®¹å™¨å†…çš„è·¯å¾„ï¼Œæ²¡æœ‰å†™å®¹å™¨å¤–çš„è·¯å¾„ï¼</span>

<span class="token comment"># å…·åæŒ‚è½½</span>
<span class="token punctuation">[</span>root@localhost home<span class="token punctuation">]</span><span class="token comment"># docker run -d -P --name nginx02 -v juming-nginx:/etc/nginx nginx</span>
5ba5708389bf71b2156fdbcedc50a62b16ac27adb2a3dfac42c52e9da5ace79f
<span class="token punctuation">[</span>root@localhost home<span class="token punctuation">]</span><span class="token comment"># docker volume ls</span>
DRIVER              VOLUME NAME
<span class="token builtin class-name">local</span>               juming-nginx

<span class="token comment"># é€šè¿‡ -v å·åï¼šå®¹å™¨å†…è·¯å¾„</span>
<span class="token comment"># æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå·  # å…ˆæ‰¾åˆ°å·æ‰€åœ¨è·¯å¾„ docker volume inspect å·åï¼Œå¦‚ä¸‹å›¾ï¼š</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181020.png" alt="image-20200611235522418" loading="lazy"></p>
<p>æ‰€æœ‰çš„dockerå®¹å™¨å†…çš„å·ï¼Œæ²¡æœ‰æŒ‡å®šç›®å½•çš„æƒ…å†µä¸‹éƒ½æ˜¯åœ¨**&#x2F;var&#x2F;lib&#x2F;docker&#x2F;volumes&#x2F;xxxx&#x2F;_data**ä¸‹ï¼<br>æˆ‘ä»¬é€šè¿‡å…·åæŒ‚è½½å¯ä»¥æ–¹ä¾¿çš„æ‰¾åˆ°æˆ‘ä»¬çš„ä¸€ä¸ªå·ï¼Œå¤§å¤šæ•°æƒ…å†µä½¿ç”¨ <strong>å…·åæŒ‚è½½</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># å¦‚ä½•ç¡®å®šæ˜¯å…·åæŒ‚è½½è¿˜æ˜¯åŒ¿åæŒ‚è½½ï¼Œè¿˜æ˜¯æŒ‡å®šè·¯å¾„æŒ‚è½½ï¼</span>
-v	å®¹å™¨å†…è·¯å¾„		       <span class="token comment"># åŒ¿åæŒ‚è½½</span>
-v	å·å:å®¹å™¨å†…è·¯å¾„	 	 <span class="token comment"># å…·åæŒ‚è½½</span>
-v	/å®¿ä¸»æœºè·¯å¾„:å®¹å™¨å†…è·¯å¾„   <span class="token comment"># æŒ‡å®šè·¯å¾„æŒ‚è½½ï¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>æ‹“å±•ï¼š</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># é€šè¿‡ -v å®¹å™¨å†…è·¯å¾„ï¼šro æˆ– rw   æ”¹å˜è¯»å†™æƒé™</span>
ro	 <span class="token comment">#readonly åªè¯»</span>
rw	 <span class="token comment">#readwrite å¯è¯»å¯å†™</span>

<span class="token comment"># ä¸€æ—¦åˆ›å»ºå®¹å™¨æ—¶è®¾ç½®äº†å®¹å™¨æƒé™ï¼Œå®¹å™¨å¯¹æˆ‘ä»¬æŒ‚è½½å‡ºæ¥çš„å†…å®¹å°±æœ‰é™å®šäº†ï¼</span>
<span class="token function">docker</span> run -d -P --name nginx05 -v juming:/etc/nginx:ro nginx
<span class="token function">docker</span> run -d -P --name nginx05 -v juming:/etc/nginx:rw nginx

<span class="token comment"># é»˜è®¤æ˜¯ rw</span>
<span class="token comment"># ro åªè¦çœ‹åˆ°roå°±è¯´æ˜è¿™ä¸ªè·¯å¾„åªèƒ½é€šè¿‡å®¿ä¸»æœºæ¥æ“ä½œï¼Œå®¹å™¨å†…éƒ¨æ˜¯æ— æ³•æ“ä½œï¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="åˆå§‹Dockerfile"><a href="#åˆå§‹Dockerfile" class="headerlink" title="åˆå§‹Dockerfile"></a>åˆå§‹Dockerfile</h2><p>Dockerfile å°±æ˜¯ç”¨æ¥æ„å»º dockeré•œåƒçš„æ„å»ºæ–‡ä»¶ï¼å‘½ä»¤è„šæœ¬ï¼ å…ˆä½“éªŒä¸€ä¸‹ï¼</p>
<p>é€šè¿‡è¿™ä¸ªè„šæœ¬å¯ä»¥ç”Ÿæˆé•œåƒï¼Œé•œåƒæ˜¯ä¸€å±‚ä¸€å±‚çš„ï¼Œè„šæœ¬æ˜¯ä¸€ä¸ªä¸ªçš„å‘½ä»¤ï¼Œæ¯ä¸ªå‘½ä»¤éƒ½æ˜¯æœ€ç»ˆé•œåƒçš„ä¸€å±‚ï¼</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># åˆ›å»ºä¸€ä¸ªdockerfileæ–‡ä»¶ï¼Œåå­—å¯ä»¥éšæœºï¼Œå»ºè®® dockerfile</span>

<span class="token punctuation">[</span>root@localhost docker-test-volume<span class="token punctuation">]</span><span class="token comment"># vim dockerfile</span>
<span class="token comment"># æ–‡ä»¶ä¸­çš„å†…å®¹ï¼šæŒ‡ä»¤(å¤§å†™) å‚æ•°</span>
FROM centos

VOLUME <span class="token punctuation">[</span><span class="token string">"volume01"</span>,<span class="token string">"volume02"</span><span class="token punctuation">]</span>

CMD <span class="token builtin class-name">echo</span><span class="token string">"----end----"</span>

CMD /bin/bash

<span class="token comment"># è¿™é‡Œçš„æ¯ä¸ªå‘½ä»¤ï¼Œå°±æ˜¯é•œåƒçš„ä¸€å±‚ï¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181021.png" alt="image-20200612003052844" loading="lazy"></p>
<p>æ³¨æ„ï¼šæˆ‘ä»¬è¿™é‡Œçš„ dockerfile  æ˜¯æˆ‘ä»¬ç¼–å†™çš„æ–‡ä»¶åå“¦ï¼</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181022.png" alt="image-20200612003717223" loading="lazy"></p>
<p>è¿™ä¸¤ä¸ªå·å’Œå¤–éƒ¨ä¸€å®šæœ‰ä¸¤ä¸ªåŒæ­¥çš„ç›®å½•ï¼</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181023.png" alt="image-20200612003946028" loading="lazy"></p>
<p>æŸ¥çœ‹ä¸€ä¸‹å·æŒ‚è½½åœ¨ä¸»æœºä¸Šçš„è·¯å¾„</p>
<p><strong>docker inspect å®¹å™¨id</strong></p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181024.png" alt="image-20200612004608027" loading="lazy"></p>
<p>æµ‹è¯•ä¸€ä¸‹åˆšæ‰çš„æ–‡ä»¶æ˜¯å¦åŒæ­¥å‡ºå»äº†ï¼</p>
<p>è¿™ç§æ–¹å¼æˆ‘ä»¬æœªæ¥ä½¿ç”¨ååˆ†çš„å¤šï¼Œå› ä¸ºæˆ‘ä»¬é€šå¸¸ä¼šæ„å»ºè‡ªå·±çš„é•œåƒï¼</p>
<p>å‡è®¾æ„å»ºé•œåƒçš„æ—¶å€™æ²¡æœ‰æŒ‚åœ¨å·ï¼Œè¦æ‰‹åŠ¨é•œåƒæŒ‚è½½å³å¯ï¼š (å‚è€ƒä¸Šæ–‡<strong>å…·åå’ŒåŒ¿åæŒ‚è½½</strong>)</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-v å·å:å®¹å™¨å†…è·¯å¾„ <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="æ•°æ®å·å®¹å™¨"><a href="#æ•°æ®å·å®¹å™¨" class="headerlink" title="æ•°æ®å·å®¹å™¨"></a>æ•°æ®å·å®¹å™¨</h2><p><strong>å¤šä¸ªmysqlåŒæ­¥æ•°æ®ï¼</strong></p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181025.png" alt="image-20200612223759573" loading="lazy"></p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181026.png" alt="image-20200612224621379" loading="lazy"></p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181027.png" alt="image-20200612225358172" loading="lazy"></p>
<p>åœ¨docker03ä¸‹åˆ›å»ºdocker03æ–‡ä»¶åï¼Œè¿›å…¥docker01å‘ç°ä¹Ÿä¾æ—§ä¼šåŒæ­¥è¿‡æ¥ï¼š</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181028.png" alt="image-20200612225641266" loading="lazy"></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># æµ‹è¯•1ï¼šåˆ é™¤docker01åï¼Œdocker02å’Œdocker03æ˜¯å¦è¿˜å¯ä»¥è®¿é—®åŸæ¥docker01ä¸‹åˆ›å»ºçš„çš„æ–‡ä»¶ï¼Ÿ</span>
<span class="token comment"># æµ‹è¯•1çš„ç»“æœä¸ºï¼šä¾æ—§å¯ä»¥è®¿é—®ï¼ï¼ï¼</span>

<span class="token comment"># æµ‹è¯•2ï¼šåˆ é™¤docker01åï¼Œdocker02å’Œdocker03ä¹‹é—´æ˜¯å¦å¯ä»¥ç›¸äº’åŒæ­¥æ–‡ä»¶ï¼Ÿ</span>
<span class="token comment"># æµ‹è¯•2çš„ç»“æœä¸ºï¼šdocket02å’Œdocker03ä¹‹é—´ä¸€ä¹å¯ä»¥å®ŒæˆåŒæ­¥ï¼ï¼ï¼ è§ä¸‹å›¾ï¼š</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181029.png" alt="image-20200612231431551" loading="lazy"></p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181030.png" alt="image-20200612231603498" loading="lazy"></p>
<p><strong>å¤šä¸ªmysqlå®ç°æ•°æ®å…±äº«</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">âœ  ~ <span class="token function">docker</span> run -d -p <span class="token number">3306</span>:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> --name mysql01 mysql:5.7
âœ  ~ <span class="token function">docker</span> run -d -p <span class="token number">3307</span>:3306 -e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> --name mysql02 --volumes-from mysql01  mysql:5.7
<span class="token comment"># è¿™ä¸ªæ—¶å€™ï¼Œå¯ä»¥å®ç°ä¸¤ä¸ªå®¹å™¨æ•°æ®åŒæ­¥ï¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p><strong>ç»“è®ºï¼š</strong></p>
<p>å®¹å™¨ä¹‹é—´çš„é…ç½®ä¿¡æ¯çš„ä¼ é€’ï¼Œæ•°æ®å·å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´æŒç»­åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨ä¸ºæ­¢ã€‚</p>
<p>ä½†æ˜¯ä¸€æ—¦ä½ æŒä¹…åŒ–åˆ°äº†æœ¬åœ°ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæœ¬åœ°çš„æ•°æ®æ˜¯ä¸ä¼šåˆ é™¤çš„ï¼</p>
<hr>
<h1 id="DockerFile"><a href="#DockerFile" class="headerlink" title="DockerFile"></a>DockerFile</h1><h2 id="DockerFileä»‹ç»"><a href="#DockerFileä»‹ç»" class="headerlink" title="DockerFileä»‹ç»"></a>DockerFileä»‹ç»</h2><p><code>dockerfile</code>æ˜¯ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ–‡ä»¶ï¼å‘½ä»¤å‚æ•°è„šæœ¬ï¼</p>
<p><strong>æ„å»ºæ­¥éª¤ï¼š</strong></p>
<p>1ã€ ç¼–å†™ä¸€ä¸ªdockerfileæ–‡ä»¶</p>
<p>2ã€ docker build æ„å»ºç§°ä¸ºä¸€ä¸ªé•œåƒ</p>
<p>3ã€ docker runè¿è¡Œé•œåƒ</p>
<p>4ã€ docker pushå‘å¸ƒé•œåƒï¼ˆDockerHub ã€é˜¿é‡Œäº‘ä»“åº“)</p>
<p>æŸ¥çœ‹å®˜æ–¹æ˜¯æ€ä¹ˆåšçš„ï¼</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181031.png" alt="image-20200612233951676" loading="lazy"></p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181032.png" alt="image-20200612234022746" loading="lazy"></p>
<p>å¾ˆå¤šå®˜æ–¹é•œåƒéƒ½æ˜¯åŸºç¡€åŒ…ï¼Œå¾ˆå¤šåŠŸèƒ½æ²¡æœ‰ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè‡ªå·±æ­å»ºè‡ªå·±çš„é•œåƒï¼</p>
<p>å®˜æ–¹æ—¢ç„¶å¯ä»¥åˆ¶ä½œé•œåƒï¼Œé‚£æˆ‘ä»¬ä¹Ÿå¯ä»¥ï¼</p>
<h2 id="DockerFileæ„å»ºè¿‡ç¨‹"><a href="#DockerFileæ„å»ºè¿‡ç¨‹" class="headerlink" title="DockerFileæ„å»ºè¿‡ç¨‹"></a>DockerFileæ„å»ºè¿‡ç¨‹</h2><p><strong>åŸºç¡€çŸ¥è¯†ï¼š</strong></p>
<p>1ã€æ¯ä¸ªä¿ç•™å…³é”®å­—(æŒ‡ä»¤ï¼‰éƒ½æ˜¯å¿…é¡»æ˜¯å¤§å†™å­—æ¯</p>
<p>2ã€æ‰§è¡Œä»ä¸Šåˆ°ä¸‹é¡ºåº</p>
<p>3ã€# è¡¨ç¤ºæ³¨é‡Š</p>
<p>4ã€æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šåˆ›å»ºæäº¤ä¸€ä¸ªæ–°çš„é•œåƒæ›¾ï¼Œå¹¶æäº¤ï¼</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181033.png" alt="image-20200612234419262" loading="lazy"></p>
<p>Dockerfileæ˜¯é¢å‘å¼€å‘çš„ï¼Œæˆ‘ä»¬ä»¥åè¦å‘å¸ƒé¡¹ç›®ï¼Œåšé•œåƒï¼Œå°±éœ€è¦ç¼–å†™dockerfileæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ååˆ†ç®€å•ï¼</p>
<p>Dockeré•œåƒé€æ¸æˆä¼ä¸šäº¤ä»˜çš„æ ‡å‡†ï¼Œå¿…é¡»è¦æŒæ¡ï¼</p>
<p>DockerFileï¼šæ„å»ºæ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸€åˆ‡çš„æ­¥éª¤ï¼Œæºä»£ç </p>
<p>DockerImagesï¼šé€šè¿‡DockerFileæ„å»ºç”Ÿæˆçš„é•œåƒï¼Œæœ€ç»ˆå‘å¸ƒå’Œè¿è¡Œäº§å“ã€‚</p>
<p>Dockerå®¹å™¨ï¼šå®¹å™¨å°±æ˜¯é•œåƒè¿è¡Œèµ·æ¥æä¾›æœåŠ¡ã€‚</p>
<h2 id="DockerFileçš„æŒ‡ä»¤"><a href="#DockerFileçš„æŒ‡ä»¤" class="headerlink" title="DockerFileçš„æŒ‡ä»¤"></a>DockerFileçš„æŒ‡ä»¤</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">FROM			<span class="token comment"># åŸºç¡€é•œåƒï¼Œä¸€åˆ‡ä»è¿™é‡Œå¼€å§‹æ„å»º</span>
MAINTAINER		<span class="token comment"># é•œåƒæ˜¯è°å†™çš„ï¼Œå§“å+é‚®ç®±</span>
RUN				<span class="token comment"># é•œåƒæ„å»ºçš„æ—¶å€™éœ€è¦è¿è¡Œçš„å‘½ä»¤</span>
ADD				<span class="token comment"># æ­¥éª¤ï¼štomcaté•œåƒï¼Œè¿™ä¸ªtomcatå‹ç¼©åŒ…ï¼ æ·»åŠ å†…å®¹</span>
WORKDIR			<span class="token comment"># é•œåƒçš„å·¥ä½œç›®å½•</span>
VOLUME			<span class="token comment"># æŒ‚è½½çš„ç›®å½•</span>
EXPOSE          <span class="token comment"># æš´éœ²ç«¯å£é…ç½®ï¼Œè·Ÿ -p æ˜¯ä¸€ä¸ªé“ç†</span>
CMD				<span class="token comment"># æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨æ—¶è¦æ‰§è¡Œçš„å‘½ä»¤,åªæœ‰æœ€åä¸€ä¸ªå‘½ä»¤ä¼šç”Ÿæ•ˆï¼Œå¯æ‚²æ›¿ä»£</span>
ENTRYPOINT		<span class="token comment"># æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥è¿½åŠ å‘½ä»¤</span>
ONBUILD			<span class="token comment"># å½“æ„å»ºä¸€ä¸ªè¢«ç»§æ‰¿DockerFile è¿™ä¸ªæ—¶å€™å°±ä¼šè¿è¡ŒONBUILDçš„æŒ‡ä»¤ã€‚è§¦å‘æŒ‡ä»¤</span>
COPY			<span class="token comment"># ç±»ä¼¼ADD,å°†æˆ‘ä»¬æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­</span>
ENV				<span class="token comment"># æ„å»ºçš„æ—¶å€™è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œè·Ÿ -e æ˜¯ä¸€ä¸ªæ„æ€</span>

<span class="token comment"># CMD å’Œ ENTRYPOINT çš„åŒºåˆ«è¯´æ˜ï¼šï¼ˆåé¢ä¹Ÿä¼šä»‹ç»ï¼‰</span>
<span class="token comment"># è‹¥CMD å’Œ ENTRYPOINT åè·Ÿçš„éƒ½æ˜¯ ls -a è¿™ä¸ªå‘½ä»¤ï¼Œå½“docker run ä¸€ä¸ªå®¹å™¨æ—¶ï¼Œæ·»åŠ äº† -l é€‰é¡¹ï¼Œåˆ™CMDé‡Œçš„ls -a å‘½ä»¤å°±ä¼šè¢«æ›¿æ¢æˆ-l;è€ŒENTRYPOINTä¸­çš„ ls -aä¼šè¿½åŠ -lå˜æˆ ls -a -l  </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181034.png" alt="image-20200613000838850" loading="lazy"></p>
<h2 id="å®æˆ˜æµ‹è¯•"><a href="#å®æˆ˜æµ‹è¯•" class="headerlink" title="å®æˆ˜æµ‹è¯•"></a>å®æˆ˜æµ‹è¯•</h2><p>Docker Hubä¸­99%é•œåƒéƒ½æ˜¯ä»è¿™ä¸ªåŸºç¡€é•œåƒè¿‡æ¥çš„( <strong>FROM scratch</strong> )ï¼Œç„¶åé…ç½®éœ€è¦çš„è½¯ä»¶å’Œé…ç½®æ¥æ„å»ºã€‚</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181035.png" alt="image-20200613001130237" loading="lazy"></p>
<blockquote>
<p>åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„ centos</p>
</blockquote>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># 1ã€ç¼–å†™DockerFileæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</span>
<span class="token punctuation">[</span>root@localhost dockerfile<span class="token punctuation">]</span><span class="token comment"># cat mydockerfile-centos</span>
FROM centos						
MAINTAINER ztx<span class="token operator">&lt;</span><span class="token number">123456</span>@qq.com<span class="token operator">></span> 

ENV MYPATH /usr/local
WORKDIR <span class="token variable">$MYPATH</span>

RUN yum -y <span class="token function">install</span> <span class="token function">vim</span>
RUN yum -y <span class="token function">install</span> net-tools

EXPOSE <span class="token number">80</span>

CMD <span class="token builtin class-name">echo</span> <span class="token variable">$MYPATH</span>
CMD <span class="token builtin class-name">echo</span> <span class="token string">"----end----"</span>
CMD /bin/bash

<span class="token comment"># 2ã€é€šè¿‡è¿™ä¸ªæ–‡ä»¶æ„å»ºé•œåƒ</span>
<span class="token comment"># å‘½ä»¤docker build -f dockerfileæ–‡ä»¶è·¯å¾„ -t é•œåƒå:[tag] .</span>
<span class="token punctuation">[</span>root@localhost dockerfile<span class="token punctuation">]</span><span class="token comment"># docker build -f mydockerfile-centos -t mycentos:0.1 .</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span>
Successfully built c987078b06cb
Successfully tagged mycentos:0.1

<span class="token comment"># 3ã€æµ‹è¯•è¿è¡Œ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>å¯¹æ¯”ï¼š</strong></p>
<p><strong>ä¹‹å‰çš„åŸç”Ÿçš„centos</strong></p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181036.png" alt="image-20200613004551789" loading="lazy"></p>
<p><strong>æˆ‘ä»¬å¢åŠ ä¹‹åçš„é•œåƒ</strong></p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181037.png" alt="image-20200613005056516" loading="lazy"></p>
<p>æ³¨ï¼šnet-tools åŒ…å«ä¸€ç³»åˆ—ç¨‹åºï¼Œæ„æˆäº† Linux ç½‘ç»œçš„åŸºç¡€ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åˆ—å‡ºæœ¬åœ°é•œåƒçš„å˜æ›´å†å²ï¼š</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181038.png" alt="image-20200613005625844" loading="lazy"></p>
<p>æˆ‘ä»¬å¹³æ—¶æ‹¿åˆ°ä¸€ä¸ªé•œåƒï¼Œå¯ä»¥ç ”ç©¶ä¸€ä¸‹å®ƒæ˜¯æ€ä¹ˆåšçš„ï¼</p>
<blockquote>
<p>CMD å’Œ ENTRYPOINT çš„åŒºåˆ«</p>
</blockquote>
<p><strong>æµ‹è¯•CMD</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># ç¼–å†™dockerfileæ–‡ä»¶</span>
$ <span class="token function">vim</span> dockerfile-test-cmd
FROM centos
CMD <span class="token punctuation">[</span><span class="token string">"ls"</span>,<span class="token string">"-a"</span><span class="token punctuation">]</span>
<span class="token comment"># æ„å»ºé•œåƒ</span>
$ <span class="token function">docker</span> build  -f dockerfile-test-cmd -t cmd-test:0.1 <span class="token builtin class-name">.</span>
<span class="token comment"># è¿è¡Œé•œåƒ</span>
$ <span class="token function">docker</span> run cmd-test:0.1
<span class="token builtin class-name">.</span>
<span class="token punctuation">..</span>
.dockerenv
bin
dev

<span class="token comment"># æƒ³è¿½åŠ ä¸€ä¸ªå‘½ä»¤  -l æˆä¸ºls -al</span>
$ <span class="token function">docker</span> run cmd-test:0.1 -l
docker: Error response from daemon: OCI runtime create failed: container_linux.go:349: starting container process caused <span class="token string">"exec: <span class="token entity" title="\&quot;">\"</span>-l<span class="token entity" title="\&quot;">\"</span>:
 executable file not found in <span class="token environment constant">$PATH</span>"</span><span class="token builtin class-name">:</span> unknown.
ERRO<span class="token punctuation">[</span>0000<span class="token punctuation">]</span> error waiting <span class="token keyword">for</span> container: context canceled 
<span class="token comment"># cmdçš„æƒ…å†µä¸‹ -l æ›¿æ¢äº†CMD["ls","-l"]ã€‚ -l  ä¸æ˜¯å‘½ä»¤,æ‰€ä»¥æŠ¥é”™</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>æµ‹è¯•ENTRYPOINT</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># ç¼–å†™dockerfileæ–‡ä»¶</span>
$ <span class="token function">vim</span> dockerfile-test-entrypoint
FROM centos
ENTRYPOINT <span class="token punctuation">[</span><span class="token string">"ls"</span>,<span class="token string">"-a"</span><span class="token punctuation">]</span>
$ <span class="token function">docker</span> run entrypoint-test:0.1
<span class="token builtin class-name">.</span>
<span class="token punctuation">..</span>
.dockerenv
bin
dev
etc
home
lib
lib64
lost+found <span class="token punctuation">..</span>.
<span class="token comment"># æˆ‘ä»¬çš„å‘½ä»¤ï¼Œæ˜¯ç›´æ¥æ‹¼æ¥åœ¨æˆ‘ä»¬çš„ENTRYPOINTå‘½ä»¤åé¢çš„</span>
$ <span class="token function">docker</span> run entrypoint-test:0.1 -l
total <span class="token number">56</span>
drwxr-xr-x   <span class="token number">1</span> root root <span class="token number">4096</span> May <span class="token number">16</span> 06:32 <span class="token builtin class-name">.</span>
drwxr-xr-x   <span class="token number">1</span> root root <span class="token number">4096</span> May <span class="token number">16</span> 06:32 <span class="token punctuation">..</span>
-rwxr-xr-x   <span class="token number">1</span> root root    <span class="token number">0</span> May <span class="token number">16</span> 06:32 .dockerenv
lrwxrwxrwx   <span class="token number">1</span> root root    <span class="token number">7</span> May <span class="token number">11</span>  <span class="token number">2019</span> bin -<span class="token operator">></span> usr/bin
drwxr-xr-x   <span class="token number">5</span> root root  <span class="token number">340</span> May <span class="token number">16</span> 06:32 dev
drwxr-xr-x   <span class="token number">1</span> root root <span class="token number">4096</span> May <span class="token number">16</span> 06:32 etc
drwxr-xr-x   <span class="token number">2</span> root root <span class="token number">4096</span> May <span class="token number">11</span>  <span class="token number">2019</span> home
lrwxrwxrwx   <span class="token number">1</span> root root    <span class="token number">7</span> May <span class="token number">11</span>  <span class="token number">2019</span> lib -<span class="token operator">></span> usr/lib
lrwxrwxrwx   <span class="token number">1</span> root root    <span class="token number">9</span> May <span class="token number">11</span>  <span class="token number">2019</span> lib64 -<span class="token operator">></span> usr/lib64 <span class="token punctuation">..</span><span class="token punctuation">..</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Dockerfileä¸­å¾ˆå¤šå‘½ä»¤éƒ½ååˆ†çš„ç›¸ä¼¼ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£å®ƒä»¬çš„åŒºåˆ«ï¼Œæˆ‘ä»¬æœ€å¥½çš„å­¦ä¹ å°±æ˜¯å¯¹æ¯”ä»–ä»¬ç„¶åæµ‹è¯•æ•ˆæœï¼</p>
<h2 id="å®æˆ˜ï¼šTomcaté•œåƒ"><a href="#å®æˆ˜ï¼šTomcaté•œåƒ" class="headerlink" title="å®æˆ˜ï¼šTomcaté•œåƒ"></a>å®æˆ˜ï¼šTomcaté•œåƒ</h2><p>1ã€å‡†å¤‡é•œåƒæ–‡ä»¶tomcatå‹ç¼©åŒ…ï¼Œjdkå‹ç¼©åŒ…ï¼</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181039.png" alt="image-20200613151500712" loading="lazy"></p>
<p>2ã€ç¼–å†™Dockerfileæ–‡ä»¶ï¼Œå®˜æ–¹å‘½å: <strong>Dockerfile</strong> ï¼Œbuildä¼šè‡ªåŠ¨å¯»æ‰¾è¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¸è¦ -f æŒ‡å®šäº†ï¼</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">FROM centos
MAINTAINER kuangshen<span class="token operator">&lt;</span><span class="token number">123456</span>@qq.com<span class="token operator">></span>

COPY readme.txt /usr/local/readme.txt

ADD jdk-8u161-linux-x64.tar.gz    /usr/local/
ADD apache-tomcat-8.0.53.tar.gz   /usr/local

RUN yum -y <span class="token function">install</span> <span class="token function">vim</span>
ENV MYPATH /usr/local
WORKDIR <span class="token variable">$MYPATH</span>


ENV JAVA_HOME /usr/local/jdk1.8.0_161
ENV CLASSPATH <span class="token variable">$JAVA_HOME</span>/lib/dt.jar:<span class="token variable">$JAVA_HOME</span>/lib/tools.jar
ENV CATALINA_HOME /usr/local/apache-tomcat-8.0.53
ENV CATALINA_BASH /usr/local/apache-tomcat-8.0.53
ENV <span class="token environment constant">PATH</span> <span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token variable">$CATALINA_HOME</span>/lib:<span class="token variable">$CATALINA_HOME</span>/bin

EXPOSE <span class="token number">8080</span>

CMD /usr/local/apache-tomcat-8.0.53/bin/startup.sh <span class="token operator">&amp;&amp;</span> <span class="token function">tail</span> -F /usr/local/apache-tomcat-8.0.53/bin/logs/catalina.out
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>3ã€æ„å»ºé•œåƒ</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># docker build -t diytomcat .     diytomcatæ˜¯å®šä¹‰çš„é•œåƒå</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>4ã€å¯åŠ¨é•œåƒï¼Œåˆ›å»ºå®¹å™¨</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># docker run -d -p 9090:8080 --name kuangshentomcat02 -v /home/kuangshen/build/tomcat/test:/usr/local/apache-tomcat-8.0.53/webapps/test -v /home/kuangshen/build/tomcat/tomcatlogs/:/usr/local/apache-tomcat-8.0.53/logs diytomcat</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>5ã€è®¿é—®æµ‹è¯•</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181040.png" alt="image-20200613175551231" loading="lazy"></p>
<p>6ã€å‘å¸ƒé¡¹ç›®ï¼ˆç”±äºåšäº†å·æŒ‚è½½ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨æœ¬åœ°å‘å¸ƒé¡¹ç›®äº†ï¼‰</p>
<p>åœ¨&#x2F;home&#x2F;kuangshen&#x2F;build&#x2F;tomcat&#x2F;testç›®å½•ä¸‹åˆ›å»ºWEB-INFç›®å½•ï¼Œåœ¨é‡Œé¢åˆ›å»ºweb.xmlæ–‡ä»¶ï¼š</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://java.sun.com/xml/ns/javaee<span class="token punctuation">"</span></span>
           <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
           <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://java.sun.com/xml/ns/javaee
                               http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd<span class="token punctuation">"</span></span>
           <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2.5<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>åœ¨å›åˆ°testç›®å½•ï¼Œæ·»åŠ ä¸€ä¸ªindex.jspé¡µé¢ï¼š</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>hello kuangshen<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>vim
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
Hello World!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>
&lt;%
System.out.println("---my test web logs---");
%>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å‘ç°ï¼štesté¡¹ç›®éƒ¨ç½²æˆåŠŸï¼Œå¯ä»¥ç›´æ¥è®¿é—®ï¼</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181041.png" alt="image-20200613180033633" loading="lazy"></p>
<p>æ³¨æ„ï¼šè¿™æ—¶è¿›å…¥&#x2F;home&#x2F;kuangshen&#x2F;build&#x2F;tomcat&#x2F;tomcatlogs&#x2F;ç›®å½•ä¸‹å°±å¯ä»¥çœ‹åˆ°æ—¥å¿—ä¿¡æ¯äº†ï¼š</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@localhost tomcatlogs<span class="token punctuation">]</span><span class="token comment"># cat catalina.out </span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181042.png" alt="image-20200613180355186" loading="lazy"></p>
<p>ä¹‹å‰ä¸€ç›´è®¿é—®å¤±è´¥æ˜¯web.xmlé…ç½®æœ‰é—®é¢˜ï¼Œæœ€åä¹Ÿæ˜¯æŸ¥çœ‹è¯¥æ—¥å¿—æç¤ºï¼Œæ‰å¾—ä»¥è§£å†³ï¼ï¼ï¼</p>
<p>æˆ‘ä»¬ä»¥åå¼€å‘çš„æ­¥éª¤ï¼šéœ€è¦æŒæ¡Dockerfileçš„ç¼–å†™ï¼æˆ‘ä»¬ä¹‹åçš„ä¸€åˆ‡éƒ½æ˜¯ä½¿ç”¨dockeré•œåƒæ¥å‘å¸ƒè¿è¡Œï¼</p>
<h2 id="å‘å¸ƒè‡ªå·±çš„é•œåƒ"><a href="#å‘å¸ƒè‡ªå·±çš„é•œåƒ" class="headerlink" title="å‘å¸ƒè‡ªå·±çš„é•œåƒ"></a>å‘å¸ƒè‡ªå·±çš„é•œåƒ</h2><blockquote>
<p>Docker Hub</p>
</blockquote>
<p>1ã€åœ°å€ <a target="_blank" rel="noopener" href="https://hub.docker.com/">https://hub.docker.com/</a></p>
<p>2ã€ç¡®å®šè¿™ä¸ªè´¦å·å¯ä»¥ç™»å½•</p>
<p>3ã€åœ¨æˆ‘ä»¬æœåŠ¡å™¨ä¸Šæäº¤è‡ªå·±çš„é•œåƒ</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@localhost tomcat<span class="token punctuation">]</span><span class="token comment"># docker login --help</span>

Usage:	<span class="token function">docker</span> login <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> <span class="token punctuation">[</span>SERVER<span class="token punctuation">]</span>

Log <span class="token keyword">in</span> to a Docker registry.
If no server is specified, the default is defined by the daemon.

Options:
  -p, --password string   Password
      --password-stdin    Take the password from stdin
  -u, --username string   Username

<span class="token comment"># ç™»å½•dockerhub</span>
<span class="token punctuation">[</span>root@localhost tomcat<span class="token punctuation">]</span><span class="token comment"># docker login -u ztx115</span>
Password: 
WARNING<span class="token operator">!</span> Your password will be stored unencrypted <span class="token keyword">in</span> /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/<span class="token comment">#credentials-store</span>

Login Succeeded<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>4ã€ç™»å½•å®Œæ¯•åå°±å¯ä»¥æäº¤é•œåƒäº†ï¼Œå°±æ˜¯ä¸€æ­¥ docker push</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># pushè‡ªå·±çš„é•œåƒåˆ°æœåŠ¡å™¨ä¸Šï¼</span>
<span class="token punctuation">[</span>root@localhost tomcat<span class="token punctuation">]</span><span class="token comment"># docker push diytomcat</span>
The push refers to repository <span class="token punctuation">[</span>docker.io/library/diytomcat<span class="token punctuation">]</span>
c5593011cd68: Preparing 
d3ce40b8178e: Preparing 
02084c67dcc9: Preparing 
2b7c1c6c89c5: Preparing 
0683de282177: Preparing 
denied: requested access to the resource is denied  <span class="token comment"># æ‹’ç»</span>

<span class="token comment"># pushé•œåƒçš„é—®é¢˜ï¼Ÿ</span>
<span class="token comment"># è§£å†³ï¼šå¢åŠ ä¸€ä¸ªtag         docker tag  æŒ‡å®šé•œåƒçš„id   dockerhubçš„ç”¨æˆ·å/é•œåƒé‡å‘½å:[tag]</span>
<span class="token punctuation">[</span>root@localhost tomcat<span class="token punctuation">]</span><span class="token comment"># docker tag bb64ab96b432 ztx115/tomcat:1.0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181043.png" alt="image-20200613211709842" loading="lazy"></p>
<p><strong>æ³¨æ„ï¼šé•œåƒçš„é‡å‘½åå‰ä¸€å®šè¦åŠ å½“å‰çš„dockerhubçš„ç”¨æˆ·åï¼Œå¦åˆ™å°†ä¼špushå¤±è´¥ï¼ï¼ï¼ï¼</strong>ï¼ˆå¦‚ï¼šæŠŠztx115æ”¹æˆztx,  pushä¸€å®šå¤±è´¥ï¼ï¼‰</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># docekr pushä¸Šå»å³å¯ï¼  è‡ªå·±å¹³æ—¶å‘å¸ƒçš„é•œåƒå°½é‡å¸¦ä¸Šç‰ˆæœ¬å·</span>
<span class="token punctuation">[</span>root@localhost tomcat<span class="token punctuation">]</span><span class="token comment"># docker push ztx115/tomcat:1.0</span>
The push refers to repository <span class="token punctuation">[</span>docker.io/ztx115/tomcat<span class="token punctuation">]</span>
c5593011cd68: Pushed 
d3ce40b8178e: Pushed 
02084c67dcc9: Pushed 
2b7c1c6c89c5: Pushed 
0683de282177: Pushed 
<span class="token number">1.0</span>: digest: sha256:b6733deccf85ad66c6f4302215dd9ea63e1579817f15a099b5858785708ed408 size: <span class="token number">1372</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181044.png" alt="image-20200613210147709" loading="lazy"></p>
<p>å‘ç°ï¼Œæäº¤æ—¶ä¹Ÿæ˜¯æŒ‰ç…§é•œåƒçš„å±‚çº§æ¥è¿›è¡Œæäº¤çš„ï¼</p>
<blockquote>
<p>å‘å¸ƒåˆ°é˜¿é‡Œäº‘é•œåƒæœåŠ¡ä¸Šï¼ˆç‹‚ç¥è§†é¢‘æˆªå›¾ï¼‰</p>
</blockquote>
<p>1ã€ç™»å½•é˜¿é‡Œäº‘</p>
<p>2ã€æ‰¾åˆ°å®¹å™¨é•œåƒæœåŠ¡</p>
<p>3ã€åˆ›å»ºå‘½åç©ºé—´</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181045.png" alt="image-20200613212823736" loading="lazy"></p>
<p>4ã€åˆ›å»ºå®¹å™¨é•œåƒä»“åº“</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181046.png" alt="image-20200613213014849" loading="lazy"></p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181047.png" alt="image-20200613213135466" loading="lazy"></p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181048.png" alt="image-20200613213222587" loading="lazy"></p>
<p>5ã€æµè§ˆé˜¿é‡Œäº‘</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181049.png" alt="image-20200613214159792" loading="lazy"></p>
<p>ä½¿ç”¨é˜¿é‡Œäº‘å®¹å™¨é•œåƒçš„å‚è€ƒå®˜æ–¹æŒ‡å—å³å¯ï¼ï¼ï¼ï¼ˆå³ä¸Šå›¾ï¼‰</p>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181050.png" alt="image-20200613214846464" loading="lazy"></p>
<hr>
<h1 id="Dockerç½‘ç»œ"><a href="#Dockerç½‘ç»œ" class="headerlink" title="Dockerç½‘ç»œ"></a>Dockerç½‘ç»œ</h1><h2 id="ç†è§£Docker0"><a href="#ç†è§£Docker0" class="headerlink" title="ç†è§£Docker0"></a>ç†è§£Docker0</h2><p>æ¸…ç©ºæ‰€æœ‰ç¯å¢ƒ</p>
<blockquote>
<p>æµ‹è¯•</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181051.png" alt="image-20200613224119526" loading="lazy"></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># é—®é¢˜ï¼š dockeræ˜¯å¦‚ä½•å¤„ç†å®¹å™¨ç½‘ç»œè®¿é—®çš„ï¼Ÿ</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181052.png" alt="image-20200613220806390" loading="lazy"></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># [root@localhost /]# docker run -d -P --name tomcat01 tomcat</span>

<span class="token comment"># æŸ¥çœ‹å®¹å™¨çš„å†…éƒ¨ç½‘ç»œåœ°å€   ip addr,  å‘ç°å®¹å™¨å¯åŠ¨çš„æ—¶å€™ä¼šå¾—åˆ°ä¸€ä¸ª eth0@if43 ipåœ°å€ï¼Œdockeråˆ†é…çš„ï¼</span>
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker exec -it tomcat01 ip addr</span>
<span class="token number">1</span>: lo: <span class="token operator">&lt;</span>LOOPBACK,UP,LOWER_UP<span class="token operator">></span> mtu <span class="token number">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="token number">1000</span>
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet <span class="token number">127.0</span>.0.1/8 scope <span class="token function">host</span> lo
       valid_lft forever preferred_lft forever
<span class="token number">42</span>: eth0@if43: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">></span> mtu <span class="token number">1500</span> qdisc noqueue state UP group default 
    link/ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid <span class="token number">0</span>
    inet <span class="token number">172.17</span>.0.2/16 brd <span class="token number">172.17</span>.255.255 scope global eth0
       valid_lft forever preferred_lft forever

<span class="token comment"># æ€è€ƒï¼šlinuxèƒ½ä¸èƒ½pingé€šdockerå®¹å™¨å†…éƒ¨ï¼</span>
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># ping 172.17.0.2</span>
PING <span class="token number">172.17</span>.0.2 <span class="token punctuation">(</span><span class="token number">172.17</span>.0.2<span class="token punctuation">)</span> <span class="token number">56</span><span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">)</span> bytes of data.
<span class="token number">64</span> bytes from <span class="token number">172.17</span>.0.2: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.476</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.17</span>.0.2: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.099</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.17</span>.0.2: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.105</span> ms
<span class="token punctuation">..</span>.
<span class="token comment"># linux å¯ä»¥pingé€šdockerå®¹å™¨å†…éƒ¨</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>åŸç†</p>
</blockquote>
<p>1ã€æˆ‘ä»¬æ¯å¯åŠ¨ä¸€ä¸ªdockerå®¹å™¨ï¼Œdockerå°±ä¼šç»™dockerå®¹å™¨åˆ†é…ä¸€ä¸ªipï¼Œæˆ‘ä»¬åªè¦è£…äº†dockerï¼Œå°±ä¼šæœ‰ä¸€ä¸ªdocker01ç½‘å¡ã€‚</p>
<p>æ¡¥æ¥æ¨¡å¼ï¼Œä½¿ç”¨çš„æŠ€æœ¯æ˜¯veth-pairæŠ€æœ¯ï¼</p>
<p>å†æ¬¡æµ‹è¯• ip addrï¼Œå‘ç°å¤šäº†ä¸€å¯¹ç½‘å¡ : </p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181053.png" alt="image-20200613224311838" loading="lazy"></p>
<p>2ã€å†å¯åŠ¨ä¸€ä¸ªå®¹å™¨æµ‹è¯•ï¼Œå‘ç°åˆå¤šäº†ä¸€å¯¹ç½‘å¡ï¼ï¼ï¼</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181054.png" alt="image-20200613224610781" loading="lazy"></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># æˆ‘ä»¬å‘ç°è¿™ä¸ªå®¹å™¨å¸¦æ¥ç½‘å¡ï¼Œéƒ½æ˜¯ä¸€å¯¹å¯¹çš„</span>
<span class="token comment"># veth-pair å°±æ˜¯ä¸€å¯¹çš„è™šæ‹Ÿè®¾å¤‡æ¥å£ï¼Œä»–ä»¬éƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œä¸€æ®µè¿ç€åè®®ï¼Œä¸€æ®µå½¼æ­¤ç›¸è¿</span>
<span class="token comment"># æ­£å› ä¸ºæœ‰è¿™ä¸ªç‰¹æ€§ï¼Œveth-pair å……å½“ä¸€ä¸ªæ¡¥æ¢ï¼Œè¿æ¥å„ç§è™šæ‹Ÿç½‘ç»œè®¾å¤‡</span>
<span class="token comment"># OpenStackï¼ŒDockerå®¹å™¨ä¹‹é—´çš„è¿æ¥ï¼ŒOVSçš„è¿æ¥éƒ½æ˜¯ä½¿ç”¨veth-pairæŠ€æœ¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>3ã€æˆ‘ä»¬æ¥æµ‹è¯•ä¸‹tomcat01å’Œtomcat02æ˜¯å¦å¯ä»¥pingé€šï¼</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker exec -it tomcat02 ping 172.17.0.2</span>
PING <span class="token number">172.17</span>.0.2 <span class="token punctuation">(</span><span class="token number">172.17</span>.0.2<span class="token punctuation">)</span> <span class="token number">56</span><span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">)</span> bytes of data.
<span class="token number">64</span> bytes from <span class="token number">172.17</span>.0.2: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.556</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.17</span>.0.2: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.096</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.17</span>.0.2: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.111</span> ms
<span class="token punctuation">..</span>.

<span class="token comment"># ç»“è®ºï¼šå®¹å™¨ä¸å®¹å™¨ä¹‹é—´æ˜¯å¯ä»¥ç›¸äº’pingé€šçš„ï¼ï¼ï¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>ç»˜åˆ¶ä¸€ä¸ªç½‘ç»œæ¨¡å‹å›¾ï¼š</strong></p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181055.png" alt="image-20200613231046553" loading="lazy"></p>
<p><strong>ç»“è®ºï¼štomcat01 å’Œ tomcat02 æ˜¯å…¬ç”¨ä¸€ä¸ªè·¯ç”±å™¨ï¼Œå³ docker0 !</strong> </p>
<p>æ‰€æœ‰çš„å®¹å™¨ä¸æŒ‡å®šç½‘ç»œçš„æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯ç» docker0 è·¯ç”±çš„ï¼Œdocker ä¼šç»™æˆ‘ä»¬çš„å®¹å™¨åˆ†é…ä¸€ä¸ªé»˜è®¤çš„å¯ç”¨ip</p>
<blockquote>
<p>å°ç»“</p>
</blockquote>
<p>Dockerä½¿ç”¨çš„æ˜¯Linuxçš„æ¡¥æ¥æŠ€æœ¯ï¼Œå®¿ä¸»æœºæ˜¯ä¸€ä¸ªDockerå®¹å™¨çš„ç½‘æ¡¥ docker0</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181056.png" alt="image-20200613232031835" loading="lazy"></p>
<p><strong>æ³¨æ„ï¼š</strong>Dockerä¸­æ‰€æœ‰ç½‘ç»œæ¥å£éƒ½æ˜¯è™šæ‹Ÿçš„ï¼Œè™šæ‹Ÿçš„è½¬å‘æ•ˆç‡é«˜ï¼ï¼ˆå†…ç½‘ä¼ é€’æ–‡ä»¶ï¼‰</p>
<p>åªè¦å®¹å™¨ä¸€åˆ é™¤ï¼Œå¯¹åº”çš„ä¸€å¯¹ç½‘æ¡¥å°±æ²¡æœ‰ï¼</p>
<h2 id="â€“link"><a href="#â€“link" class="headerlink" title="â€“link"></a>â€“link</h2><blockquote>
<p>æ€è€ƒä¸€ä¸ªåœºæ™¯ï¼šæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªå¾®æœåŠ¡ï¼Œdatabase url &#x3D; ip ï¼Œé¡¹ç›®ä¸é‡å¯ï¼Œæ•°æ®åº“ipæ¢æ‰äº†ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥é€šè¿‡åå­—æ¥è®¿é—®å®¹å™¨ï¼Ÿ</p>
</blockquote>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># tomcat02 æƒ³é€šè¿‡ç›´æ¥ping å®¹å™¨åï¼ˆå³"tomcat01"ï¼‰æ¥pingé€šï¼Œè€Œä¸æ˜¯ipï¼Œå‘ç°å¤±è´¥äº†ï¼</span>
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker exec -it tomcat02 ping tomcat01</span>
ping: tomcat01: Name or <span class="token function">service</span> not known

<span class="token comment"># å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</span>
<span class="token comment"># é€šè¿‡--link å°±å¯ä»¥è§£å†³è¿™ä¸ªç½‘ç»œè”é€šé—®é¢˜äº†ï¼ï¼ï¼      å‘ç°æ–°å»ºçš„tomcat03å¯ä»¥pingé€štomcat02</span>
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker run -d -P --name tomcat03 --link tomcat02 tomcat</span>
87a0e5f5e6da34a7f043ff6210b57f92f40b24d0d4558462e7746b2e19902721
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker exec -it tomcat03 ping tomcat02</span>
PING tomcat02 <span class="token punctuation">(</span><span class="token number">172.17</span>.0.3<span class="token punctuation">)</span> <span class="token number">56</span><span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">)</span> bytes of data.
<span class="token number">64</span> bytes from tomcat02 <span class="token punctuation">(</span><span class="token number">172.17</span>.0.3<span class="token punctuation">)</span>: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.132</span> ms
<span class="token number">64</span> bytes from tomcat02 <span class="token punctuation">(</span><span class="token number">172.17</span>.0.3<span class="token punctuation">)</span>: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.116</span> ms
<span class="token number">64</span> bytes from tomcat02 <span class="token punctuation">(</span><span class="token number">172.17</span>.0.3<span class="token punctuation">)</span>: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.116</span> ms
<span class="token number">64</span> bytes from tomcat02 <span class="token punctuation">(</span><span class="token number">172.17</span>.0.3<span class="token punctuation">)</span>: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">4</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.116</span> ms

<span class="token comment"># åå‘èƒ½pingé€šå—ï¼Ÿ       å‘ç°tomcat02ä¸èƒ½oingé€štomcat03</span>
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker exec -it tomcat02 ping tomcat03</span>
ping: tomcat03: Name or <span class="token function">service</span> not known<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æ¢ç©¶ï¼šinspect  ï¼ï¼ï¼</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181057.png" alt="image-20200614002609300" loading="lazy"></p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181058.png" alt="image-20200614002832045" loading="lazy"></p>
<p>å…¶å®è¿™ä¸ªtomcat03å°±æ˜¯åœ¨æœ¬åœ°é…ç½®äº†åˆ°tomcat02çš„æ˜ å°„ï¼š</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># æŸ¥çœ‹hosts é…ç½®ï¼Œåœ¨è¿™é‡Œå‘ç°åŸç†ï¼  </span>
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker exec -it tomcat03 cat /etc/hosts</span>
<span class="token number">127.0</span>.0.1	localhost
::1	localhost ip6-localhost ip6-loopback
fe00::0	ip6-localnet
ff00::0	ip6-mcastprefix
ff02::1	ip6-allnodes
ff02::2	ip6-allrouters
<span class="token number">172.17</span>.0.3	tomcat02 95303c12f6d9    <span class="token comment"># å°±åƒwindowsä¸­çš„ host æ–‡ä»¶ä¸€æ ·ï¼Œåšäº†åœ°å€ç»‘å®š</span>
<span class="token number">172.17</span>.0.4	87a0e5f5e6da<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æœ¬è´¨æ¢ç©¶ï¼šâ€“link  å°±æ˜¯æˆ‘ä»¬åœ¨hosts é…ç½®ä¸­å¢åŠ äº†ä¸€ä¸ª 172.17.0.3    tomcat02   95303c12f6d9 ï¼ˆä¸‰æ¡ä¿¡æ¯éƒ½æ˜¯tomcat02 çš„ï¼‰</p>
<p>æˆ‘ä»¬ç°åœ¨ç©Dockerå·²ç»ä¸å»ºè®®ä½¿ç”¨ â€“link äº†ï¼ï¼ï¼</p>
<p><strong>è‡ªå®šä¹‰ç½‘ç»œï¼Œä¸ä½¿ç”¨docker0ï¼</strong></p>
<p>docker0é—®é¢˜ï¼šä¸æ”¯æŒå®¹å™¨åè¿æ¥è®¿é—®ï¼</p>
<h2 id="è‡ªå®šä¹‰ç½‘ç»œ"><a href="#è‡ªå®šä¹‰ç½‘ç»œ" class="headerlink" title="è‡ªå®šä¹‰ç½‘ç»œ"></a>è‡ªå®šä¹‰ç½‘ç»œ</h2><blockquote>
<p>æŸ¥çœ‹æ‰€æœ‰çš„dockerç½‘ç»œ</p>
</blockquote>
<p>â€˜<img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181059.png" alt="image-20200614004445923" loading="lazy"></p>
<p><strong>ç½‘ç»œæ¨¡å¼</strong></p>
<p>bridge  ï¼šæ¡¥æ¥ ï¼ˆdockeré»˜è®¤ï¼Œè‡ªå·±åˆ›å»ºä¹Ÿä½¿ç”¨bridgeæ¨¡å¼ï¼ï¼‰</p>
<p>none ï¼šä¸é…ç½®ç½‘ç»œ</p>
<p>host  ï¼šå’Œå®¿ä¸»æœºå…±äº«ç½‘ç»œ</p>
<p>container  ï¼šå®¹å™¨ç½‘ç»œè¿é€šï¼Œå®¹å™¨ç›´æ¥äº’è”ï¼ï¼ˆç”¨çš„å°‘ï¼å±€é™å¾ˆå¤§ï¼ï¼‰</p>
<p><strong>æµ‹è¯•</strong></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># æˆ‘ä»¬ä¹‹å‰ç›´æ¥å¯åŠ¨çš„å‘½ä»¤ (é»˜è®¤æ˜¯ä½¿ç”¨--net bridgeï¼Œå¯çœ)ï¼Œè¿™ä¸ªbridgeå°±æ˜¯æˆ‘ä»¬çš„docker0 </span>
<span class="token function">docker</span> run -d -P --name tomcat01 tomcat   
<span class="token function">docker</span> run -d -P --name tomcat01 --net bridge tomcat
<span class="token comment"># ä¸Šé¢ä¸¤å¥ç­‰ä»·</span>

<span class="token comment"># docker0ï¼ˆå³bridgeï¼‰é»˜è®¤ä¸æ”¯æŒåŸŸåè®¿é—® ï¼ --linkå¯ä»¥æ‰“é€šè¿æ¥ï¼Œå³æ”¯æŒåŸŸåè®¿é—®ï¼</span>

<span class="token comment"># æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªç½‘ç»œï¼</span>
<span class="token comment"># --driver bridge    		ç½‘ç»œæ¨¡å¼å®šä¹‰ä¸º ï¼šæ¡¥æ¥</span>
<span class="token comment"># --subnet 192.168.0.0/16	å®šä¹‰å­ç½‘ ï¼ŒèŒƒå›´ä¸ºï¼š192.168.0.2 ~ 192.168.255.255</span>
<span class="token comment"># --gateway 192.168.0.1		å­ç½‘ç½‘å…³è®¾ä¸ºï¼š 192.168.0.1 </span>
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet</span>
7ee3adf259c8c3d86fce6fd2c2c9f85df94e6e57c2dce5449e69a5b024efc28c
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker network ls</span>
NETWORK ID          NAME                DRIVER              SCOPE
461bf576946c        bridge              bridge              <span class="token builtin class-name">local</span>
c501704cf28e        <span class="token function">host</span>                <span class="token function">host</span>                <span class="token builtin class-name">local</span>
7ee3adf259c8        mynet               bridge              <span class="token builtin class-name">local</span>  	<span class="token comment">#è‡ªå®šä¹‰çš„ç½‘ç»œ</span>
9354fbcc160f        none                null                <span class="token builtin class-name">local</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>è‡ªå·±çš„ç½‘ç»œå°±åˆ›å»ºå¥½äº†ï¼š</strong></p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181100.png" alt="image-20200614011229854" loading="lazy"></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker run -d -P --name tomcat-net-01 --net mynet tomcat</span>
b168a37d31fcdc2ff172fd969e4de6de731adf53a2960eeae3dd9c24e14fac67
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker run -d -P --name tomcat-net-02 --net mynet tomcat</span>
c07d634e17152ca27e318c6fcf6c02e937e6d5e7a1631676a39166049a44c03c
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker network inspect mynet</span>
<span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
        <span class="token string">"Name"</span><span class="token builtin class-name">:</span> <span class="token string">"mynet"</span>,
        <span class="token string">"Id"</span><span class="token builtin class-name">:</span> <span class="token string">"7ee3adf259c8c3d86fce6fd2c2c9f85df94e6e57c2dce5449e69a5b024efc28c"</span>,
        <span class="token string">"Created"</span><span class="token builtin class-name">:</span> <span class="token string">"2020-06-14T01:03:53.767960765+08:00"</span>,
        <span class="token string">"Scope"</span><span class="token builtin class-name">:</span> <span class="token string">"local"</span>,
        <span class="token string">"Driver"</span><span class="token builtin class-name">:</span> <span class="token string">"bridge"</span>,
        <span class="token string">"EnableIPv6"</span><span class="token builtin class-name">:</span> false,
        <span class="token string">"IPAM"</span><span class="token builtin class-name">:</span> <span class="token punctuation">&#123;</span>
            <span class="token string">"Driver"</span><span class="token builtin class-name">:</span> <span class="token string">"default"</span>,
            <span class="token string">"Options"</span><span class="token builtin class-name">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>,
            <span class="token string">"Config"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">&#123;</span>
                    <span class="token string">"Subnet"</span><span class="token builtin class-name">:</span> <span class="token string">"192.168.0.0/16"</span>,
                    <span class="token string">"Gateway"</span><span class="token builtin class-name">:</span> <span class="token string">"192.168.0.1"</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span>,
        <span class="token string">"Internal"</span><span class="token builtin class-name">:</span> false,
        <span class="token string">"Attachable"</span><span class="token builtin class-name">:</span> false,
        <span class="token string">"Ingress"</span><span class="token builtin class-name">:</span> false,
        <span class="token string">"ConfigFrom"</span><span class="token builtin class-name">:</span> <span class="token punctuation">&#123;</span>
            <span class="token string">"Network"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>
        <span class="token punctuation">&#125;</span>,
        <span class="token string">"ConfigOnly"</span><span class="token builtin class-name">:</span> false,
        <span class="token string">"Containers"</span><span class="token builtin class-name">:</span> <span class="token punctuation">&#123;</span>
            <span class="token string">"b168a37d31fcdc2ff172fd969e4de6de731adf53a2960eeae3dd9c24e14fac67"</span><span class="token builtin class-name">:</span> <span class="token punctuation">&#123;</span>
                <span class="token string">"Name"</span><span class="token builtin class-name">:</span> <span class="token string">"tomcat-net-01"</span>,
                <span class="token string">"EndpointID"</span><span class="token builtin class-name">:</span> <span class="token string">"f0af1c33fc5d47031650d07d5bc769e0333da0989f73f4503140151d0e13f789"</span>,
                <span class="token string">"MacAddress"</span><span class="token builtin class-name">:</span> <span class="token string">"02:42:c0:a8:00:02"</span>,
                <span class="token string">"IPv4Address"</span><span class="token builtin class-name">:</span> <span class="token string">"192.168.0.2/16"</span>,
                <span class="token string">"IPv6Address"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>
            <span class="token punctuation">&#125;</span>,
            <span class="token string">"c07d634e17152ca27e318c6fcf6c02e937e6d5e7a1631676a39166049a44c03c"</span><span class="token builtin class-name">:</span> <span class="token punctuation">&#123;</span>
                <span class="token string">"Name"</span><span class="token builtin class-name">:</span> <span class="token string">"tomcat-net-02"</span>,
                <span class="token string">"EndpointID"</span><span class="token builtin class-name">:</span> <span class="token string">"ba114b9bd5f3b75983097aa82f71678653619733efc1835db857b3862e744fbc"</span>,
                <span class="token string">"MacAddress"</span><span class="token builtin class-name">:</span> <span class="token string">"02:42:c0:a8:00:03"</span>,
                <span class="token string">"IPv4Address"</span><span class="token builtin class-name">:</span> <span class="token string">"192.168.0.3/16"</span>,
                <span class="token string">"IPv6Address"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>,
        <span class="token string">"Options"</span><span class="token builtin class-name">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>,
        <span class="token string">"Labels"</span><span class="token builtin class-name">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">]</span>


<span class="token comment"># å†æ¬¡æµ‹è¯• ping è¿æ¥</span>
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker exec -it tomcat-net-01 ping 192.168.0.3</span>
PING <span class="token number">192.168</span>.0.3 <span class="token punctuation">(</span><span class="token number">192.168</span>.0.3<span class="token punctuation">)</span> <span class="token number">56</span><span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">)</span> bytes of data.
<span class="token number">64</span> bytes from <span class="token number">192.168</span>.0.3: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.199</span> ms
<span class="token number">64</span> bytes from <span class="token number">192.168</span>.0.3: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.121</span> ms
^C
--- <span class="token number">192.168</span>.0.3 <span class="token function">ping</span> statistics ---
<span class="token number">2</span> packets transmitted, <span class="token number">2</span> received, <span class="token number">0</span>% packet loss, <span class="token function">time</span> 2ms
rtt min/avg/max/mdev <span class="token operator">=</span> <span class="token number">0.121</span>/0.160/0.199/0.039 ms

<span class="token comment"># ç°åœ¨ä¸ä½¿ç”¨ --link,ä¹Ÿå¯ä»¥ping åå­—äº†ï¼ï¼ï¼ï¼ï¼ï¼</span>
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker exec -it tomcat-net-01 ping tomcat-net-02</span>
PING tomcat-net-02 <span class="token punctuation">(</span><span class="token number">192.168</span>.0.3<span class="token punctuation">)</span> <span class="token number">56</span><span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">)</span> bytes of data.
<span class="token number">64</span> bytes from tomcat-net-02.mynet <span class="token punctuation">(</span><span class="token number">192.168</span>.0.3<span class="token punctuation">)</span>: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.145</span> ms
<span class="token number">64</span> bytes from tomcat-net-02.mynet <span class="token punctuation">(</span><span class="token number">192.168</span>.0.3<span class="token punctuation">)</span>: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.117</span> ms
^C
--- tomcat-net-02 <span class="token function">ping</span> statistics ---
<span class="token number">2</span> packets transmitted, <span class="token number">2</span> received, <span class="token number">0</span>% packet loss, <span class="token function">time</span> 3ms
rtt min/avg/max/mdev <span class="token operator">=</span> <span class="token number">0.117</span>/0.131/0.145/0.014 ms
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æˆ‘ä»¬åœ¨ä½¿ç”¨è‡ªå®šä¹‰çš„ç½‘ç»œæ—¶ï¼Œdockeréƒ½å·²ç»å¸®æˆ‘ä»¬ç»´æŠ¤å¥½äº†å¯¹åº”å…³ç³»ï¼Œæ¨èæˆ‘ä»¬å¹³æ—¶è¿™æ ·ä½¿ç”¨ç½‘ç»œï¼ï¼ï¼</p>
<p>å¥½å¤„ï¼š</p>
<p>redisâ€”â€”ä¸åŒçš„é›†ç¾¤ä½¿ç”¨ä¸åŒçš„ç½‘ç»œï¼Œä¿è¯äº†é›†ç¾¤çš„å®‰å…¨å’Œå¥åº·</p>
<p>mysqlâ€”â€”ä¸åŒçš„é›†ç¾¤ä½¿ç”¨ä¸åŒçš„ç½‘ç»œï¼Œä¿è¯äº†é›†ç¾¤çš„å®‰å…¨å’Œå¥åº·</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181101.png" alt="image-20200614015209053" loading="lazy"></p>
<h2 id="ç½‘ç»œè¿é€š"><a href="#ç½‘ç»œè¿é€š" class="headerlink" title="ç½‘ç»œè¿é€š"></a>ç½‘ç»œè¿é€š</h2><p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181102.png" alt="image-20200614013625192" loading="lazy"></p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181103.png" alt="image-20200614013801842" loading="lazy"></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># æµ‹è¯•æ‰“é€š tomcat01 â€” mynet</span>
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker network connect mynet tomcat01</span>

<span class="token comment"># è¿é€šä¹‹åå°±æ˜¯å°† tomcat01 æ”¾åˆ°äº† mynet ç½‘ç»œä¸‹ï¼ ï¼ˆè§ä¸‹å›¾ï¼‰</span>
<span class="token comment"># è¿™å°±äº§ç”Ÿäº† ä¸€ä¸ªå®¹å™¨æœ‰ä¸¤ä¸ªipåœ°å€ ! å‚è€ƒé˜¿é‡Œäº‘çš„å…¬æœ‰ipå’Œç§æœ‰ip</span>
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker network inspect mynet</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181104.png" alt="image-20200614014544797" loading="lazy"></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># tomcat01 è¿é€šok</span>
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker exec -it tomcat01 ping tomcat-net-01</span>
PING tomcat-net-01 <span class="token punctuation">(</span><span class="token number">192.168</span>.0.2<span class="token punctuation">)</span> <span class="token number">56</span><span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">)</span> bytes of data.
<span class="token number">64</span> bytes from tomcat-net-01.mynet <span class="token punctuation">(</span><span class="token number">192.168</span>.0.2<span class="token punctuation">)</span>: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.124</span> ms
<span class="token number">64</span> bytes from tomcat-net-01.mynet <span class="token punctuation">(</span><span class="token number">192.168</span>.0.2<span class="token punctuation">)</span>: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.162</span> ms
<span class="token number">64</span> bytes from tomcat-net-01.mynet <span class="token punctuation">(</span><span class="token number">192.168</span>.0.2<span class="token punctuation">)</span>: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.107</span> ms
^C
--- tomcat-net-01 <span class="token function">ping</span> statistics ---
<span class="token number">3</span> packets transmitted, <span class="token number">3</span> received, <span class="token number">0</span>% packet loss, <span class="token function">time</span> 3ms
rtt min/avg/max/mdev <span class="token operator">=</span> <span class="token number">0.107</span>/0.131/0.162/0.023 ms

<span class="token comment"># tomcat02 æ˜¯ä¾æ—§æ‰“ä¸é€šçš„</span>
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># docker exec -it tomcat02 ping tomcat-net-01</span>
ping: tomcat-net-01: Name or <span class="token function">service</span> not known<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>ç»“è®ºï¼š</strong>å‡è®¾è¦è·¨ç½‘ç»œæ“ä½œåˆ«äººï¼Œå°±éœ€è¦ä½¿ç”¨docker network connect  è¿é€šã€‚ã€‚ã€‚</p>
<h2 id="å®æˆ˜ï¼šéƒ¨ç½²Redisé›†ç¾¤"><a href="#å®æˆ˜ï¼šéƒ¨ç½²Redisé›†ç¾¤" class="headerlink" title="å®æˆ˜ï¼šéƒ¨ç½²Redisé›†ç¾¤"></a>å®æˆ˜ï¼šéƒ¨ç½²Redisé›†ç¾¤</h2><p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181105.png" alt="image-20200614124559172" loading="lazy"></p>
<p>å¯åŠ¨6ä¸ªrediså®¹å™¨ï¼Œä¸Šé¢ä¸‰ä¸ªæ˜¯ä¸»ï¼Œä¸‹é¢ä¸‰ä¸ªæ˜¯å¤‡ï¼</p>
<p>ä½¿ç”¨shellè„šæœ¬å¯åŠ¨ï¼</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># åˆ›å»ºredisé›†ç¾¤ç½‘ç»œ</span>
<span class="token function">docker</span> network create redis --subnet <span class="token number">172.38</span>.0.0/16

<span class="token comment"># é€šè¿‡è„šæœ¬åˆ›å»ºå…­ä¸ªredisé…ç½®</span>
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># for port in $(seq 1 6);\</span>
<span class="token operator">></span> <span class="token keyword">do</span> <span class="token punctuation">\</span>
<span class="token operator">></span> <span class="token function">mkdir</span> -p /mydata/redis/node-<span class="token variable">$&#123;port&#125;</span>/conf
<span class="token operator">></span> <span class="token function">touch</span> /mydata/redis/node-<span class="token variable">$&#123;port&#125;</span>/conf/redis.conf
<span class="token operator">></span> <span class="token function">cat</span> <span class="token operator">&lt;&lt;</span>EOF<span class="token operator">>></span>/mydata/redis/node-<span class="token variable">$&#123;port&#125;</span>/conf/redis.conf
<span class="token operator">></span> port <span class="token number">6379</span>
<span class="token operator">></span> <span class="token builtin class-name">bind</span> <span class="token number">0.0</span>.0.0
<span class="token operator">></span> cluster-enabled <span class="token function">yes</span>
<span class="token operator">></span> cluster-config-file nodes.conf
<span class="token operator">></span> cluster-node-timeout <span class="token number">5000</span>
<span class="token operator">></span> cluster-announce-ip <span class="token number">172.38</span>.0.1<span class="token variable">$&#123;port&#125;</span>
<span class="token operator">></span> cluster-announce-port <span class="token number">6379</span>
<span class="token operator">></span> cluster-announce-bus-port <span class="token number">16379</span>
<span class="token operator">></span> appendonly <span class="token function">yes</span>
<span class="token operator">></span> EOF
<span class="token operator">></span> <span class="token keyword">done</span>

<span class="token comment"># æŸ¥çœ‹åˆ›å»ºçš„å…­ä¸ªredis</span>
<span class="token punctuation">[</span>root@localhost /<span class="token punctuation">]</span><span class="token comment"># cd /mydata/</span>
<span class="token punctuation">[</span>root@localhost mydata<span class="token punctuation">]</span><span class="token comment"># \ls</span>
redis
<span class="token punctuation">[</span>root@localhost mydata<span class="token punctuation">]</span><span class="token comment"># cd redis/</span>
<span class="token punctuation">[</span>root@localhost redis<span class="token punctuation">]</span><span class="token comment"># ls</span>
node-1  node-2  node-3  node-4  node-5  node-6

<span class="token comment"># æŸ¥çœ‹redis-1çš„é…ç½®ä¿¡æ¯</span>
<span class="token punctuation">[</span>root@localhost redis<span class="token punctuation">]</span><span class="token comment"># cd node-1</span>
<span class="token punctuation">[</span>root@localhost node-1<span class="token punctuation">]</span><span class="token comment"># ls</span>
conf
<span class="token punctuation">[</span>root@localhost node-1<span class="token punctuation">]</span><span class="token comment"># cd conf/</span>
<span class="token punctuation">[</span>root@localhost conf<span class="token punctuation">]</span><span class="token comment"># ls</span>
redis.conf
<span class="token punctuation">[</span>root@localhost conf<span class="token punctuation">]</span><span class="token comment"># cat redis.conf </span>
port <span class="token number">6379</span>
<span class="token builtin class-name">bind</span> <span class="token number">0.0</span>.0.0
cluster-enabled <span class="token function">yes</span>
cluster-config-file nodes.conf
cluster-node-timeout <span class="token number">5000</span>
cluster-announce-ip <span class="token number">172.38</span>.0.11
cluster-announce-port <span class="token number">6379</span>
cluster-announce-bus-port <span class="token number">16379</span>
appendonly <span class="token function">yes</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">docker</span> run -p <span class="token number">6371</span>:6379 -p <span class="token number">16371</span>:16379 --name redis-1 <span class="token punctuation">\</span>
-v /mydata/redis/node-1/data:/data <span class="token punctuation">\</span>
-v /mydata/redis/node-1/conf/redis.conf:/etc/redis/redis.conf <span class="token punctuation">\</span>
-d --net redis --ip <span class="token number">172.38</span>.0.11 redis:5.0.9-alpine3.11 redis-server /etc/redis/redis.conf

<span class="token function">docker</span> run -p <span class="token number">6372</span>:6379 -p <span class="token number">16372</span>:16379 --name redis-2 <span class="token punctuation">\</span>
-v /mydata/redis/node-2/data:/data <span class="token punctuation">\</span>
-v /mydata/redis/node-2/conf/redis.conf:/etc/redis/redis.conf <span class="token punctuation">\</span>
-d --net redis --ip <span class="token number">172.38</span>.0.12 redis:5.0.9-alpine3.11 redis-server /etc/redis/redis.conf

<span class="token function">docker</span> run -p <span class="token number">6373</span>:6379 -p <span class="token number">16373</span>:16379 --name redis-3 <span class="token punctuation">\</span>
-v /mydata/redis/node-3/data:/data <span class="token punctuation">\</span>
-v /mydata/redis/node-3/conf/redis.conf:/etc/redis/redis.conf <span class="token punctuation">\</span>
-d --net redis --ip <span class="token number">172.38</span>.0.13 redis:5.0.9-alpine3.11 redis-server /etc/redis/redis.conf

<span class="token function">docker</span> run -p <span class="token number">6374</span>:6379 -p <span class="token number">16374</span>:16379 --name redis-4 <span class="token punctuation">\</span>
-v /mydata/redis/node-4/data:/data <span class="token punctuation">\</span>
-v /mydata/redis/node-4/conf/redis.conf:/etc/redis/redis.conf <span class="token punctuation">\</span>
-d --net redis --ip <span class="token number">172.38</span>.0.14 redis:5.0.9-alpine3.11 redis-server /etc/redis/redis.conf

<span class="token function">docker</span> run -p <span class="token number">6375</span>:6379 -p <span class="token number">16375</span>:16379 --name redis-5 <span class="token punctuation">\</span>
-v /mydata/redis/node-5/data:/data <span class="token punctuation">\</span>
-v /mydata/redis/node-5/conf/redis.conf:/etc/redis/redis.conf <span class="token punctuation">\</span>
-d --net redis --ip <span class="token number">172.38</span>.0.15 redis:5.0.9-alpine3.11 redis-server /etc/redis/redis.conf

<span class="token function">docker</span> run -p <span class="token number">6376</span>:6379 -p <span class="token number">16376</span>:16379 --name redis-6 <span class="token punctuation">\</span>
-v /mydata/redis/node-6/data:/data <span class="token punctuation">\</span>
-v /mydata/redis/node-6/conf/redis.conf:/etc/redis/redis.conf <span class="token punctuation">\</span>
-d --net redis --ip <span class="token number">172.38</span>.0.16 redis:5.0.9-alpine3.11 redis-server /etc/redis/redis.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181106.png" alt="image-20200614133829277" loading="lazy"></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@localhost conf<span class="token punctuation">]</span><span class="token comment"># docker exec -it redis-1 /bin/sh</span>
/data <span class="token comment"># ls</span>
appendonly.aof  nodes.conf
/data <span class="token comment"># redis-cli --cluster create 172.38.0.11:6379 172.38.0.12:6379 172.38.0.13:6379 172.38.0.14:6379 172.38.0.15:6379 172.38.0.16:6379 --cluster-replicas 1</span>
<span class="token operator">>></span><span class="token operator">></span> Performing <span class="token builtin class-name">hash</span> slots allocation on <span class="token number">6</span> nodes<span class="token punctuation">..</span>.
Master<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> -<span class="token operator">></span> Slots <span class="token number">0</span> - <span class="token number">5460</span>
Master<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> -<span class="token operator">></span> Slots <span class="token number">5461</span> - <span class="token number">10922</span>
Master<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> -<span class="token operator">></span> Slots <span class="token number">10923</span> - <span class="token number">16383</span>
Adding replica <span class="token number">172.38</span>.0.15:6379 to <span class="token number">172.38</span>.0.11:6379
Adding replica <span class="token number">172.38</span>.0.16:6379 to <span class="token number">172.38</span>.0.12:6379
Adding replica <span class="token number">172.38</span>.0.14:6379 to <span class="token number">172.38</span>.0.13:6379
M: c5551e2a30c220fc9de9df2e34692f20f3382b32 <span class="token number">172.38</span>.0.11:6379
   slots:<span class="token punctuation">[</span><span class="token number">0</span>-5460<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
M: d12ebd8c9e12dbbe22e7b9b18f0f143bdc14e94b <span class="token number">172.38</span>.0.12:6379
   slots:<span class="token punctuation">[</span><span class="token number">5461</span>-10922<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5462</span> slots<span class="token punctuation">)</span> master
M: 825146ce6ab80fbb46ec43fcfec1c6e2dac55157 <span class="token number">172.38</span>.0.13:6379
   slots:<span class="token punctuation">[</span><span class="token number">10923</span>-16383<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
S: 9f810c0e15ac99af68e114a0ee4e32c4c7067e2b <span class="token number">172.38</span>.0.14:6379
   replicates 825146ce6ab80fbb46ec43fcfec1c6e2dac55157
S: e370225bf57d6ef6d54ad8e3d5d745a52b382d1a <span class="token number">172.38</span>.0.15:6379
   replicates c5551e2a30c220fc9de9df2e34692f20f3382b32
S: 79428c1d018dd29cf191678658008cbe5100b714 <span class="token number">172.38</span>.0.16:6379
   replicates d12ebd8c9e12dbbe22e7b9b18f0f143bdc14e94b
Can I <span class="token builtin class-name">set</span> the above configuration? <span class="token punctuation">(</span>type <span class="token string">'yes'</span> to accept<span class="token punctuation">)</span>: <span class="token function">yes</span>
<span class="token operator">>></span><span class="token operator">></span> Nodes configuration updated
<span class="token operator">>></span><span class="token operator">></span> Assign a different config epoch to each <span class="token function">node</span>
<span class="token operator">>></span><span class="token operator">></span> Sending CLUSTER MEET messages to <span class="token function">join</span> the cluster
Waiting <span class="token keyword">for</span> the cluster to <span class="token function">join</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span>
<span class="token operator">>></span><span class="token operator">></span> Performing Cluster Check <span class="token punctuation">(</span>using <span class="token function">node</span> <span class="token number">172.38</span>.0.11:6379<span class="token punctuation">)</span>
M: c5551e2a30c220fc9de9df2e34692f20f3382b32 <span class="token number">172.38</span>.0.11:6379
   slots:<span class="token punctuation">[</span><span class="token number">0</span>-5460<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
   <span class="token number">1</span> additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
S: 79428c1d018dd29cf191678658008cbe5100b714 <span class="token number">172.38</span>.0.16:6379
   slots: <span class="token punctuation">(</span><span class="token number">0</span> slots<span class="token punctuation">)</span> slave
   replicates d12ebd8c9e12dbbe22e7b9b18f0f143bdc14e94b
M: d12ebd8c9e12dbbe22e7b9b18f0f143bdc14e94b <span class="token number">172.38</span>.0.12:6379
   slots:<span class="token punctuation">[</span><span class="token number">5461</span>-10922<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5462</span> slots<span class="token punctuation">)</span> master
   <span class="token number">1</span> additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
S: e370225bf57d6ef6d54ad8e3d5d745a52b382d1a <span class="token number">172.38</span>.0.15:6379
   slots: <span class="token punctuation">(</span><span class="token number">0</span> slots<span class="token punctuation">)</span> slave
   replicates c5551e2a30c220fc9de9df2e34692f20f3382b32
S: 9f810c0e15ac99af68e114a0ee4e32c4c7067e2b <span class="token number">172.38</span>.0.14:6379
   slots: <span class="token punctuation">(</span><span class="token number">0</span> slots<span class="token punctuation">)</span> slave
   replicates 825146ce6ab80fbb46ec43fcfec1c6e2dac55157
M: 825146ce6ab80fbb46ec43fcfec1c6e2dac55157 <span class="token number">172.38</span>.0.13:6379
   slots:<span class="token punctuation">[</span><span class="token number">10923</span>-16383<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
   <span class="token number">1</span> additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token punctuation">[</span>OK<span class="token punctuation">]</span> All nodes agree about slots configuration.
<span class="token operator">>></span><span class="token operator">></span> Check <span class="token keyword">for</span> <span class="token function">open</span> slots<span class="token punctuation">..</span>.
<span class="token operator">>></span><span class="token operator">></span> Check slots coverage<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>OK<span class="token punctuation">]</span> All <span class="token number">16384</span> slots covered.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>dockeræ­å»ºredisé›†ç¾¤å®Œæˆï¼</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181107.png" alt="image-20200614141549867" loading="lazy"></p>
<p>æˆ‘ä»¬ä½¿ç”¨dockerä¹‹åï¼Œæ‰€æœ‰çš„æŠ€æœ¯éƒ½ä¼šæ…¢æ…¢å˜å¾—ç®€å•èµ·æ¥ï¼</p>
<hr>
<h1 id="Springbootå¾®æœåŠ¡æ‰“åŒ…Dockeré•œåƒ"><a href="#Springbootå¾®æœåŠ¡æ‰“åŒ…Dockeré•œåƒ" class="headerlink" title="Springbootå¾®æœåŠ¡æ‰“åŒ…Dockeré•œåƒ"></a>Springbootå¾®æœåŠ¡æ‰“åŒ…Dockeré•œåƒ</h1><p>1ã€æ„å»ºspringbooté¡¹ç›®ï¼Œæ‰“åŒ…åº”ç”¨</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181108.png" alt="image-20200614155721369" loading="lazy"></p>
<p>2ã€ç¼–å†™Dockerfileï¼Œè¿åŒé¡¹ç›®çš„jaråŒ…ä¸€å¹¶ä¸Šä¼ æŒ‡å®šç›®å½•ä¸‹</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181109.png" alt="image-20200614153734161" loading="lazy"></p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181110.png" alt="image-20200614154114656" loading="lazy"></p>
<p>3ã€æ„å»ºé•œåƒ</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181111.png" alt="image-20200614154355597" loading="lazy"></p>
<p>4ã€åˆ›å»ºé¡¹ç›®å®¹å™¨ï¼Œå‘å¸ƒè¿è¡Œï¼ï¼ï¼</p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181112.png" alt="image-20200614155034087" loading="lazy"></p>
<p><img src="https://raw.githubusercontent.com/wushuai2000/PicGo/main/img/20220303181113.png" alt="image-20200614155340519" loading="lazy"></p>
<p>ä»¥åæˆ‘ä»¬ä½¿ç”¨äº†Dockerä¹‹åï¼Œç»™åˆ«äººäº¤ä»˜å°±æ˜¯ä¸€ä¸ªé•œåƒå³å¯ï¼</p>
</div></section><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="Donate" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">æˆ‘å¾ˆå¯çˆ±ï¼Œè¯·ç»™æˆ‘é’±</div><div id="qr" style="display:none;"><div style="display:inline-block"><a href="/images/alipay-qrcode.jpg"><img loading="lazy" src="/images/alipay-qrcode.jpg" alt="æ”¯ä»˜å®" title="æ”¯ä»˜å®"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a href="/images/qqpay-qrcode.jpg"><img loading="lazy" src="/images/qqpay-qrcode.jpg" alt="QQ æ”¯ä»˜" title="QQ æ”¯ä»˜"></a><div><span style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></span></div></div><div style="display:inline-block"><a href="/images/wechatpay-qrcode.jpg"><img loading="lazy" src="/images/wechatpay-qrcode.jpg" alt="å¾®ä¿¡æ”¯ä»˜" title="å¾®ä¿¡æ”¯ä»˜"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>Post author: </strong>Explorer</li><li class="post-copyright-link"><strong>Post link: </strong><a href="http://ccsu.top/posts/b3ee7ac2/" title="Dockerè¿›é˜¶">http://ccsu.top/posts/b3ee7ac2/</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> unless otherwise stated.</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/posts/65cd929b/" rel="prev" title="linuxåŸºæœ¬å‘½ä»¤"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">linuxåŸºæœ¬å‘½ä»¤</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/posts/fb618b33/" rel="next" title="Dockeræ¦‚è¿°"><span class="post-nav-text">Dockeræ¦‚è¿°</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div id="waline"></div><script src="/js/comments/waline.js" type="module" defer></script></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank">çš–ICPå¤‡20002891å·-2</a></div><div class="copyright"><span>&copy; 2016 â€“ 2023 </span><span class="with-love" id="animate" title="èµåŠ©è€…ä»¬"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> Explorer</span></div><div class="powered"><span>Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> v6.0.0</span><span class="footer-separator">|</span><span>Theme - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.8.8</span></div><div class="live-time"><span>æœ¬åšå®¢å·²èŒèŒå“’åœ°è¿è¡Œ</span><span id="display_live_time"></span><span class="moe-text">(â—'â—¡'â—)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2022-02-12T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = ` ${passDay} Days ${passHour} Hours ${passMinute} Minutes ${passSecond} Seconds`;
}
blog_live_time();
</script></div><div id="busuanzi"><span id="busuanzi_container_site_pv" title="Total Views"><span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg></span><span id="busuanzi_value_site_pv"></span></span><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#6200ee" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="Search"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="/js/search/local-search.js" defer type="module"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="Searching..." value=""></div><div id="local-search-result"></div></div><script>function initMourn() {
  const date = new Date();
  const today = (date.getMonth() + 1) + "-" + date.getDate()
  const mourn_days = ["4-4","9-18"]
  if (mourn_days.includes(today)) {
    document.documentElement.style.filter = "grayscale(1)";
  }
}
initMourn();</script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":150,"height":350,"hOffset":null,"vOffset":null},"mobile":{"show":true},"log":false});</script></body></html>